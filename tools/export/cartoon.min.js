define("Class",[],function(){var b=function(){},a=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;b.extend=function(g){var f=this,e=this.prototype,i=function(){if(!a&&this.init){this.init.apply(this,arguments)}};if(f!==b){a=true;i.prototype=new f()}a=false;var h=i.prototype;for(var d in g){h[d]=(typeof(e[d])==="function"&&typeof(g[d])==="function"&&c.test(g[d]))?(function(j,k){return function(){var m=this._super;this._super=e[j];var l=k.apply(this,arguments);this._super=m;return l}})(d,g[d]):g[d]}i.extend=arguments.callee;return i};return b});define("Ticker",["require","exports","module","Class"],function(c,b,d){var a=c("Class");var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,f=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;var g=a.extend({fps:-1,interval:-1,_paused:true,_timer:null,_targets:null,init:function(h){if(h){this.interval=h;this.fps=(1000/h).toFixed(2)}else{this.interval=16.67;this.fps=60}this._targets=[];g._tickers.push(this)},isActive:function(){return !this._paused},start:function(){this._clearTimer();this._paused=false;this._setTimer()},stop:function(){this._paused=true;this._clearTimer()},has:function(k){var h=this._targets;for(var j=h.length-1;j>=0;j--){if(h[j]===k){return true}}return false},add:function(h){if(h.update instanceof Function){if(h._ticker){h._ticker.remove(h)}h._ticker=this}this._targets.push(h)},remove:function(k){var h=this._targets;for(var j=h.length-1;j>=0;j--){if(h[j]===k){h.splice(j,1);if(k._ticker){k._ticker=null}break}}},removeAll:function(){var h=this._targets,i;while(h.length){i=h.pop();if(i._ticker){i._ticker=null}}},_clearTimer:function(){if(this._timer){f(this._timer);this._timer=null}},_setTimer:function(){var t=this,k=t.interval,u=e===window.setTimeout;var r=0,l=0,j=0,q=0,m=(k-1)*0.97,i=[],s,p;var h=function(){if(u){return true}if(l===0){l=new Date().getTime();return true}else{j=new Date().getTime();if(j-l>m){l=j;return true}}return false};var n=function(){if(r===0){r=new Date().getTime()}else{j=new Date().getTime();q=j-r;if(q>k*3){q=k}r=j;i.push(q);if(i.length>=10){i.splice(0,5);s=0;p=i.length;for(var v=0;v<p;v++){s+=i[v]}t.fps=Math.floor(1000*p/s)}}t._exec(q)};var o=function(){if(h()){n()}t._clearTimer();if(!t._paused){t._timer=e(o,k)}};o()},_exec:function(n){var j=this._targets,m;for(var k=0,h=j.length;k<h;k++){if(this._paused){break}m=j[k];if(m.update instanceof Function){m.update(n)}else{if(m instanceof Function){m(n)}}}}});g._tickers=[];g.destroy=function(){var k=this._tickers,m;for(var j=0,h=k.length;j<h;j++){m=k[j];if(m.isActive()){m.stop()}}};return g});define("EventDispatcher",["require","exports","module","Class"],function(c,b,d){var a=c("Class");var e=a.extend({_listeners:null,on:function(f,g){this.addEventListener(f,g)},off:function(f,g){this.removeEventListener(f,g)},trigger:function(f){this.dispatchEvent(f)},addEventListener:function(h,i){if(!this._listeners){this._listeners={}}var g=this._listeners,f=g[h];if(!f){f=g[h]=[];if(!f.indexOf){f.indexOf=function(m){for(var k=0,j=this.length;k<j;k++){if(this[k]===m){return k}}return -1}}}if(f.indexOf(i)===-1){f.push(i)}},hasEventListener:function(h,i){if(!this._listeners){return false}var g=this._listeners,f=g[h];if(f&&f.indexOf(i)!==-1){return true}return false},removeEventListener:function(i,j){if(!this._listeners){return}var h=this._listeners,f=h[i];if(f){var g=f.indexOf(j);if(g!==-1){f.splice(g,1)}}},dispatchEvent:function(h){if(!this._listeners){return}var k=this._listeners,f=k[h.type];if(f){h.target=this;for(var j=0,g=f.length;j<g;j++){f[j].call(this,h)}}}});return e});define("PrivateData",["require","exports","module","Class"],function(d,c,e){var b=d("Class");var a=b.extend({_data:null,init:function(){this._data={}},get:function(f){return this._data[f]},set:function(f,g){this._data[f]=g;return g}});return a});define("StyleSheet",["require","exports","module"],function(c,b,e){var a=document.createElement("div").style,g=a.webkitTransform===""?"webkit":a.WebkitTransform===""?"Webkit":a.msTransform===""?"ms":a.MozTransform===""?"Moz":"ct",f=navigator.userAgent.indexOf("MSIE 9.0")>0,h=g==="ct"&&a.filter==="";var d=function(){};d.has=function(i){return !!d.styles[i]};d.init=function(k,i){var j=d.styles[i];if(j&&j.init){return j.init(k,i)}};d.get=function(k,i){var j=d.styles[i];if(j){return j.get(k,i)}};d.set=function(l,i,k){var j=d.styles[i];if(j){j.set(l,i,k)}};d.step=function(l,i,k){var j=d.styles[i];if(j&&j.step){j.step(l,i,k)}};d.commonGet=function(j,i){return j[i]};d.commonSet=function(k,i,j){k[i]=j};d.commonCss=function(j,i,k){var l=i.charAt(0).toUpperCase()+i.substring(1,i.length);j[g+l]=k};d.commonStep=function(m,k,l){var o=l.start,j=l.end,n=l.pos;var i=(j-o)*n+o;m.style(k,i)};d.commonSteps=function(o,m,n){var q=n.pos,p=n.start,k=n.end;var j={};for(var l in k){j[l]=(k[l]-p[l])*q+p[l]}o.style(m,j)};d.toRGBA=function(i){var j={r:0,g:0,b:0,a:1};if(i.indexOf("rgb")>-1){i=i.replace(/rgb\(|rgba\(|\)/g,"");i=i.split(",");j.r=parseInt(i[0]);j.g=parseInt(i[1]);j.b=parseInt(i[2]);if(i.length===4){j.a=i[3]}}else{if(i.indexOf("#")>-1){if(i.length===4){j.r=i.substring(1,2);j.g=i.substring(2,3);j.b=i.substring(3,4);j.r=parseInt(j.r+j.r,16);j.g=parseInt(j.g+j.g,16);j.b=parseInt(j.b+j.b,16)}else{j.r=parseInt(i.substring(1,3),16);j.g=parseInt(i.substring(3,5),16);j.b=parseInt(i.substring(5,7),16)}}}return j};d.toColor=function(j){var l=j.r.toString(16),k=j.g.toString(16),i=j.b.toString(16);if(l.length===1){l="0"+l}if(k.length===1){k="0"+k}if(i.length===1){i="0"+i}return"#"+l+k+i};d.toGradient=function(m){if(typeof(m)==="string"){m=m.split(/\,#|\,rgb/);for(var k=1,j=m.length;k<j;k++){m[k]=(m[k].indexOf("(")>-1?"rgb":"#")+m[k]}}return m};d.stepColor=function(n,m,j){m=d.toRGBA(m);j=d.toRGBA(j);var k={};for(var l in j){k[l]=Math.floor((j[l]-m[l])*n+m[l])}return d.toColor(k)};d.styles={x:{get:d.commonGet,set:function(l,i,k){d.commonSet(l,i,k);if(l.renderMode===0){var j=l.elemStyle;j.position="absolute";j.left=k+"px"}},step:d.commonStep},y:{get:d.commonGet,set:function(l,i,k){d.commonSet(l,i,k);if(l.renderMode===0){var j=l.elemStyle;j.position="absolute";j.top=k+"px"}},step:d.commonStep},z:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);k.style("transform3d",{perspective:j})},step:d.commonStep},pos:{get:function(j,i){return{x:j.x,y:j.y}},set:function(l,i,k){if(k.x!==undefined){l.x=k.x}if(k.y!==undefined){l.y=k.y}if(l.renderMode===0){var j=l.elemStyle;j.position="absolute";j.left=l.x+"px";j.top=l.y+"px"}},step:d.commonSteps},width:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){if(k._useElemSize){k.elem.width=j}else{k.elemStyle.width=j+"px"}}},step:d.commonStep},height:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){if(k._useElemSize){k.elem.height=j}else{k.elemStyle.height=j+"px"}}},step:d.commonStep},size:{get:function(j,i){return{width:j.width,height:j.height}},set:function(m,i,l){if(l.width!==undefined){m.width=l.width}if(l.height!==undefined){m.height=l.height}if(m.renderMode===0){if(m._useElemSize){var k=m.elem;k.width=m.width;k.height=m.height}else{var j=m.elemStyle;j.width=m.width+"px";j.height=m.height+"px"}}},step:d.commonSteps},transform:{init:function(j,i){j.transform={translateX:0,translateY:0,rotate:0,scale:1,scaleX:1,scaleY:1,skewX:0,skewY:0,originX:0.5,originY:0.5};return j.transform},get:function(j,i){return j.transform||this.init(j,i)},set:function(p,s,r){var o=this.get(p,s);for(var n in r){p._updateTransform(n,r[n])}if(p.renderMode===0){var j=p.elemStyle;if(h){var m=p.elem,l=j.filter,q=/Matrix([^)]*)/,k=p._updateMatrix2D(true),t=["Matrix(M11="+k.a,"M12="+k.b,"M21="+k.c,"M22="+k.d,"SizingMethod='auto expand'"].join(",");j.filter=q.test(l)?l.replace(q,t):("progid:DXImageTransform.Microsoft."+t+") "+l);j.marginLeft=o.translateX+(m.clientWidth-m.offsetWidth)*o.originX+"px";j.marginTop=o.translateY+(m.clientHeight-m.offsetHeight)*o.originY+"px"}else{d.commonCss(j,"transform",p._mergeTransformText());if("originX" in r||"originY" in r){d.commonCss(j,"transformOrigin",o.originX*100+"% "+o.originY*100+"%")}}}},step:d.commonSteps},transform3d:{init:function(j,i){j.transform3d={perspective:0,translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,originX:0.5,originY:0.5,originZ:0.5};return j.transform3d},get:function(j,i){return j.transform3d||this.init(j,i)},set:function(n,k,m){var o=this.get(n,k);for(var j in m){n._updateTransform3D(j,m[j])}if(n.renderMode===0){var l=n.elemStyle;d.commonCss(l,"transformStyle","preserve-3d");d.commonCss(l,"backfaceVisibility","visible");d.commonCss(l,"transform",n._mergeTransform3DText());if("originX" in m||"originY" in m||"originZ" in m){d.commonCss(l,"transformOrigin",o.originX*100+"% "+o.originY*100+"%")}}},step:d.commonSteps},visible:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.display=j?"block":"none"}}},overflow:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.overflow=j}}},alpha:{get:d.commonGet,set:function(n,i,m){d.commonSet(n,i,m);if(n.renderMode===0){var k=n.elemStyle;if(h){var j=k.filter,l=/alpha\(opacity=([^)]*)/,o="alpha(opacity="+m*100;k.filter=l.test(j)?j.replace(l,o):(j+" "+o+")")}else{k.opacity=m}}},step:d.commonStep},shadow:{get:d.commonGet,set:function(k,i,j){if(typeof(j)==="string"){j=j.split("px ");j={offsetX:parseFloat(j[0]),offsetY:parseFloat(j[1]),blur:parseFloat(j[2]),color:j[3]}}d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.boxShadow=j.offsetX+"px "+j.offsetY+"px "+j.blur+"px "+j.color}},step:d.commonSteps},fill:{regexpColor:/^\#|^rgb|^rgba|black|red|green|blue|yellow|orange|pink|purple|gray/,regexpGradient:/^top|^right|^bottom|^left|^center/,regexpImage:/\.jpg$|\.png$|\.gif$/,get:function(j,i){return j.fillColor||j.fillGradient||j.fillImage},set:function(k,i,j){if(this.regexpColor.test(j)){k.style("fillColor",j)}else{if(this.regexpGradient.test(j)){k.style("fillGradient",j)}else{if(this.regexpImage.test(j)){k.style("fillImage",j)}}}},step:function(l,i,j){var k=j.end;if(this.regexpColor.test(k)){l._stepStyle("fillColor",j)}else{if(this.regexpGradient.test(k)){l._stepStyle("fillGradient",j)}}}},fillColor:{get:d.commonGet,set:function(k,i,j){k.fillGradient=k.fillImage=null;d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.backgroundColor=j;k.elemStyle.backgroundImage=""}},step:function(k,i,j){k.style(i,d.stepColor(j.pos,j.start,j.end))}},fillGradient:{get:d.commonGet,set:function(n,i,m){n.fillColor=n.fillImage=null;m=d.toGradient(m);d.commonSet(n,i,m);if(n.renderMode===0){var k=n.elemStyle,o;if(h||f){var j=k.filter,l=/gradient([^)]*)/;o="gradient(GradientType=0,startColorstr='"+m[1]+"', endColorstr='"+m[2]+"'";k.filter=l.test(j)?j.replace(l,o):(j+" progid:DXImageTransform.Microsoft."+o+")")}else{if(m[0]==="center"){o="radial-gradient(circle,"+m[1]+","+m[2]+")"}else{o="linear-gradient("+m[0]+","+m[1]+","+m[2]+")"}k.backgroundImage="-webkit-"+o;k.backgroundImage="-ms-"+o;k.backgroundImage="-moz-"+o}}},step:function(m,k,l){var o=l.start,j=l.end,j=d.toGradient(j),n=l.pos,i=[j[0]];i.push(d.stepColor(n,o[1],j[1]));i.push(d.stepColor(n,o[2],j[2]));m.style(k,i)}},fillImage:{get:d.commonGet,set:function(l,i,j){l.fillColor=l.fillGradient=null;if(l.renderMode===0){l.elemStyle.backgroundImage="url("+j+")"}else{var k=new Image();k.src=j;j=k}d.commonSet(l,i,j)}},stroke:{get:function(j,i){return j.strokeColor},set:function(k,i,j){k.style("strokeColor",j)},step:function(k,i,j){k._stepStyle("strokeColor",j)}},strokeColor:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.borderColor=j}},step:function(k,i,j){k.style(i,d.stepColor(j.pos,j.start,j.end))}},lineWidth:{get:d.commonGet,set:function(k,i,j){d.commonSet(k,i,j);if(k.renderMode===0){k.elemStyle.borderWidth=j+"px"}},step:d.commonStep},radius:{get:d.commonGet,set:function(l,i,k){d.commonSet(l,i,k);l.width=l.height=k*2;if(l.renderMode===0){var j=l.elemStyle;j.borderRadius="50%";j.width=j.height=l.width+"px"}},step:d.commonStep},angle:{get:d.commonGet,set:d.commonSet,step:d.commonStep},radiusXY:{get:function(j,i){return{radiusX:j.radiusX,radiusY:j.radiusY}},set:function(l,i,k){if(k.radiusX!==undefined){l.radiusX=k.radiusX;l.width=l.radiusX*2}if(k.radiusY!==undefined){l.radiusY=k.radiusY;l.height=l.radiusY*2}if(l.renderMode===0){var j=l.elemStyle;j.borderRadius="50%";j.width=l.width+"px";j.height=l.height+"px"}},step:d.commonSteps}};return d});define("Matrix2D",["require","exports","module","Class"],function(d,c,e){var b=d("Class");var a=Math.PI/180;var f=b.extend({a:1,b:0,c:0,d:1,tx:0,ty:0,prepend:function(o,n,m,l,k,i){var h=this.tx;if(o!=1||n!=0||m!=0||l!=1){var g=this.a;var j=this.c;this.a=g*o+this.b*m;this.b=g*n+this.b*l;this.c=j*o+this.d*m;this.d=j*n+this.d*l}this.tx=h*o+this.ty*m+k;this.ty=h*n+this.ty*l+i;return this},append:function(p,n,m,l,k,i){var h=this.a;var o=this.b;var j=this.c;var g=this.d;this.a=p*h+n*j;this.b=p*o+n*g;this.c=m*h+l*j;this.d=m*o+l*g;this.tx=k*h+i*j+this.tx;this.ty=k*o+i*g+this.ty;return this},prependMatrix:function(g){this.prepend(g.a,g.b,g.c,g.d,g.tx,g.ty);return this},appendMatrix:function(g){this.append(g.a,g.b,g.c,g.d,g.tx,g.ty);return this},prependTransform:function(k,i,n,m,p,l,j){if(p%360){var g=p*a;var o=Math.cos(g);var h=Math.sin(g)}else{o=1;h=0}if(l||j){l*=a;j*=a;this.prepend(o*n,h*n,-h*m,o*m,0,0);this.prepend(Math.cos(j),Math.sin(j),-Math.sin(l),Math.cos(l),k,i)}else{this.prepend(o*n,h*n,-h*m,o*m,k,i)}return this},appendTransform:function(k,i,n,m,p,l,j){if(p%360){var g=p*a;var o=Math.cos(g);var h=Math.sin(g)}else{o=1;h=0}if(l||j){l*=a;j*=a;this.append(Math.cos(j),Math.sin(j),-Math.sin(l),Math.cos(l),k,i);this.append(o*n,h*n,-h*m,o*m,0,0)}else{this.append(o*n,h*n,-h*m,o*m,k,i)}return this},rotate:function(l){var k=Math.cos(l);var i=Math.sin(l);var h=this.a;var j=this.c;var g=this.tx;this.a=h*k-this.b*i;this.b=h*i+this.b*k;this.c=j*k-this.d*i;this.d=j*i+this.d*k;this.tx=g*k-this.ty*i;this.ty=g*i+this.ty*k;return this},skew:function(h,g){h=h*a;g=g*a;this.append(Math.cos(g),Math.sin(g),-Math.sin(h),Math.cos(h),0,0);return this},scale:function(g,h){this.a*=g;this.d*=h;this.c*=g;this.b*=h;this.tx*=g;this.ty*=h;return this},translate:function(g,h){this.tx+=g;this.ty+=h;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var h=this.a;var i=this.b;var j=this.c;var k=this.d;var g=this.tx;var l=h*k-i*j;this.a=k/l;this.b=-i/l;this.c=-j/l;this.d=h/l;this.tx=(j*this.ty-k*g)/l;this.ty=-(h*this.ty-i*g)/l;return this},isIdentity:function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},transformPoint:function(g,i,h){h=h||{};h.x=g*this.a+i*this.c+this.tx;h.y=g*this.b+i*this.d+this.ty;return h}});return f});define("Ease",["require","exports","module"],function(b,a,c){var d=function(){};d.get=function(f){return e[f]||e.linear};var e={none:function(f){if(f>=1){return 1}return 0},linear:function(f){return f},swing:function(f){return 0.5-Math.cos(f*Math.PI)/2},easeInQuad:function(g,h,f,j,i){return j*(h/=i)*h+f},easeOutQuad:function(g,h,f,j,i){return -j*(h/=i)*(h-2)+f},easeInOutQuad:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h+f}return -j/2*((--h)*(h-2)-1)+f},easeInCubic:function(g,h,f,j,i){return j*(h/=i)*h*h+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f},easeInOutCubic:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h+f}return j/2*((h-=2)*h*h+2)+f},easeInQuart:function(g,h,f,j,i){return j*(h/=i)*h*h*h+f},easeOutQuart:function(g,h,f,j,i){return -j*((h=h/i-1)*h*h*h-1)+f},easeInOutQuart:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h+f}return -j/2*((h-=2)*h*h*h-2)+f},easeInQuint:function(g,h,f,j,i){return j*(h/=i)*h*h*h*h+f},easeOutQuint:function(g,h,f,j,i){return j*((h=h/i-1)*h*h*h*h+1)+f},easeInOutQuint:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h*h+f}return j/2*((h-=2)*h*h*h*h+2)+f},easeInSine:function(g,h,f,j,i){return -j*Math.cos(h/i*(Math.PI/2))+j+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeInOutSine:function(g,h,f,j,i){return -j/2*(Math.cos(Math.PI*h/i)-1)+f},easeInExpo:function(g,h,f,j,i){return(h==0)?f:j*Math.pow(2,10*(h/i-1))+f},easeOutExpo:function(g,h,f,j,i){return(h==i)?f+j:j*(-Math.pow(2,-10*h/i)+1)+f},easeInOutExpo:function(g,h,f,j,i){if(h==0){return f}if(h==i){return f+j}if((h/=i/2)<1){return j/2*Math.pow(2,10*(h-1))+f}return j/2*(-Math.pow(2,-10*--h)+2)+f},easeInCirc:function(g,h,f,j,i){return -j*(Math.sqrt(1-(h/=i)*h)-1)+f},easeOutCirc:function(g,h,f,j,i){return j*Math.sqrt(1-(h=h/i-1)*h)+f},easeInOutCirc:function(g,h,f,j,i){if((h/=i/2)<1){return -j/2*(Math.sqrt(1-h*h)-1)+f}return j/2*(Math.sqrt(1-(h-=2)*h)+1)+f},easeInElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return -(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f},easeOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return h*Math.pow(2,-10*i)*Math.sin((i*l-j)*(2*Math.PI)/k)+m+f},easeInOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l/2)==2){return f+m}if(!k){k=l*(0.3*1.5)}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}if(i<1){return -0.5*(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f}return h*Math.pow(2,-10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k)*0.5+m+f},easeInBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*(h/=j)*h*((i+1)*h-i)+f},easeOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f},easeInOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}if((h/=j/2)<1){return k/2*(h*h*(((i*=(1.525))+1)*h-i))+f}return k/2*((h-=2)*h*(((i*=(1.525))+1)*h+i)+2)+f},easeInBounce:function(g,h,f,j,i){return j-e.easeOutBounce(g,i-h,0,j,i)+f},easeOutBounce:function(g,h,f,j,i){if((h/=i)<(1/2.75)){return j*(7.5625*h*h)+f}else{if(h<(2/2.75)){return j*(7.5625*(h-=(1.5/2.75))*h+0.75)+f}else{if(h<(2.5/2.75)){return j*(7.5625*(h-=(2.25/2.75))*h+0.9375)+f}else{return j*(7.5625*(h-=(2.625/2.75))*h+0.984375)+f}}}},easeInOutBounce:function(g,h,f,j,i){if(h<i/2){return e.easeInBounce(g,h*2,0,j,i)*0.5+f}return e.easeOutBounce(g,h*2-i,0,j,i)*0.5+j*0.5+f},easeIn:function(g,h,f,j,i){return e.easeInQuad(g,h,f,j,i)},easeOut:function(g,h,f,j,i){return e.easeOutQuad(g,h,f,j,i)},easeInOut:function(g,h,f,j,i){return e.easeInOutQuad(g,h,f,j,i)},expoIn:function(g,h,f,j,i){return e.easeInExpo(g,h,f,j,i)},expoOut:function(g,h,f,j,i){return e.easeOutExpo(g,h,f,j,i)},expoInOut:function(g,h,f,j,i){return e.easeInOutExpo(g,h,f,j,i)},bounceIn:function(g,h,f,j,i){return e.easeInBounce(g,h,f,j,i)},bounceOut:function(g,h,f,j,i){return e.easeOutBounce(g,h,f,j,i)},bounceInOut:function(g,h,f,j,i){return e.easeInOutBounce(g,h,f,j,i)},elasIn:function(g,h,f,j,i){return e.easeInElastic(g,h,f,j,i)},elasOut:function(g,h,f,j,i){return e.easeOutElastic(g,h,f,j,i)},elasInOut:function(g,h,f,j,i){return e.easeInOutElastic(g,h,f,j,i)},backIn:function(g,h,f,j,i){return e.easeInBack(g,h,f,j,i)},backOut:function(g,h,f,j,i){return e.easeOutBack(g,h,f,j,i)},backInOut:function(g,h,f,j,i){return e.easeInOutBack(g,h,f,j,i)}};d.easing=e;if(jQuery){jQuery.extend(jQuery.easing,e)}return d});define("Tween",["require","exports","module","Class","Ease"],function(c,b,d){var a=c("Class"),e=c("Ease");var f=a.extend({_done:false,_target:null,_deltaTime:-1,_start:null,_end:null,_duration:null,_easing:null,_callback:null,_frameDone:null,init:function(k,j){this._target=k;this._deltaTime=0;var l=j.start,g=j.end;if(l){k.style(l)}else{l={};for(var h in g){l[h]=this._clone(k.style(h))}}this._start=l;this._end=g;this._duration=j.duration;this._easing=e.get(j.easing);this._callback=j.callback;this._frameDone=j.frameDone},update:function(r){if(this._done){return}var n=this._target,g=this._start,l=this._end,k=this._duration,p=this._easing;var h=this._deltaTime,o=h/k,q=p(o,o,0,1,1);for(var m in l){n._stepStyle(m,{pos:q,start:g[m],end:l[m]})}if(this._frameDone){this._frameDone(o,q)}if(h===k){this._done=true;if(this._callback){this._callback()}}else{var j=h+r;this._deltaTime=j>k?k:j}},_clone:function(h){var g;if(typeof(h)==="object"){g={};for(var j in h){g[j]=this._clone(h[j])}}else{g=h}return g}});f._tweens=[];f._currentTarget=null;f.update=function(k){var j=this._tweens;for(var h=j.length-1;h>=0;h--){if(j[h]._done){j.splice(h,1)}}for(var h=0,g=j.length;h<g;h++){j[h].update(k)}};f.get=function(g){this._currentTarget=g;return this};f.addTween=function(k,g,j,o,l){var i=this._currentTarget,h=i.data("fx_queue");if(typeof(k)==="number"){o=g;g=k;k={};j="none"}var m=function(){if(o){o()}h=i.data("fx_queue");if(h&&h.length>0){h.shift()()}else{i.data("fx_queue",null)}};var n=function(){var p=new f(i,{start:null,end:k,duration:g||300,easing:j||"linear",callback:m,frameDone:l});f._tweens.push(p)};if(h){h.push(n)}else{n();i.data("fx_queue",[])}};return f});define("DisplayObject",["require","exports","module","EventDispatcher","PrivateData","StyleSheet","Matrix2D","Tween"],function(c,e,a){var b=c("EventDispatcher"),d=c("PrivateData"),g=c("StyleSheet"),i=c("Matrix2D"),h=c("Tween");var j=!!document.createElement("canvas").getContext;var f=b.extend({x:0,y:0,width:0,height:0,visible:true,overflow:"visible",alpha:1,shadow:null,transform:null,transform3d:null,parent:null,elem:null,elemStyle:null,renderMode:0,blendMode:"source-over",mouseEnabled:true,_tagName:"div",_children:null,_matrix2d:null,_privateData:null,init:function(l){if(!l){l={}}if(l.renderMode){this.renderMode=l.renderMode}if(this.renderMode===0){var m=l.elem;if(m&&typeof(m)==="string"){m=document.querySelector?document.querySelector(m):null}this.elem=m||document.createElement(this._tagName);this.elem.displayObj=this;this.elemStyle=this.elem.style;if(jQuery){this.$=jQuery(this.elem)}}else{if(l.blendMode){this.blendMode=l.blendMode}}this._children=[];this._matrix2d=new i();this._privateData=new d();for(var k in l){if(g.has(k)){this.style(k,l[k])}}if(!this.transform){g.init(this,"transform")}},addChild:function(k){if(k.parent){k.parent.removeChild(k)}k.parent=this;if(k.renderMode===0){if(this.elem){this.elem.appendChild(k.elem)}}else{this._children.push(k)}},removeChild:function(m){if(m.parent===this){m.parent=null;if(m.renderMode===0){if(this.elem){this.elem.removeChild(m.elem)}}else{var l=this._children;for(var k=l.length-1;k>=0;k--){if(l[k]===m){l.splice(k,1);break}}}}},removeAllChildren:function(){var l,n;if(this.renderMode===0){var m=this.elem;l=m.children;while(l.length){n=l[l.length-1];if(n.displayObj){n.displayObj.parent=null}m.removeChild(n)}}else{var k=-1;l=this._children;while(l.length){k=l.length-1;n=l[k];n.parent=null;l.splice(k,1)}}},eachChildren:function(o){var n=this.renderMode===0?this.elem.children:this._children,p;for(var m=0,k=n.length;m<k;m++){p=this.renderMode===0?n[m].displayObj:n[m];if(p){o(p,m)}}},enableEvents:function(k){this.mouseEnabled=k?true:false;if(this.renderMode===0){this.elemStyle.pointerEvents=k?"auto":"none"}},style:function(l,m){if(m===undefined){if(typeof(l)==="object"){for(var k in l){g.set(this,k,l[k])}}else{return g.get(this,l)}}else{g.set(this,l,m)}},data:function(k,l){if(l===undefined){return this._privateData.get(k)}else{this._privateData.set(k,l)}},to:function(k,l,o,n,m){h.get(this).addTween(k,l,o,n,m);return this},draw:function(m){if(!this._children.length){return}if(this.overflow==="hidden"){}var o=this._children,p;for(var n=0,k=o.length;n<k;n++){p=o[n];if(p.visible){m.save();p._drawCanvas(m);m.restore()}}},cache:function(){if(j){var k=document.createElement("canvas");k.width=this.width;k.height=this.height;this.draw(k.getContext("2d"));this._cacheCanvas=k}},uncache:function(){this._cacheCanvas=null},_stepStyle:function(k,l){g.step(this,k,l)},_updateTransform:function(k,l){if(k==="scale"){this.transform.scale=this.transform.scaleX=this.transform.scaleY=l}else{if(k in this.transform){this.transform[k]=l}}},_updateTransform3D:function(k,l){if(k in this.transform3d){this.transform3d[k]=l}},_mergeTransformText:function(){var l=this.transform,k="";if(l.translateX!==0||l.translateY!==0){k+="translate("+l.translateX+"px,"+l.translateY+"px)"}if(l.rotate!==0){k+=" rotate("+l.rotate+"deg)"}if(l.scaleX!==1||l.scaleY!==1){k+=" scale("+l.scaleX+","+l.scaleY+")"}if(l.skewX!==0||l.skewY!==0){k+=" skew("+l.skewX+"deg,"+l.skewY+"deg)"}return k},_mergeTransform3DText:function(){var l=this.transform3d,k="";if(l.perspective!==0){k+="perspective("+l.perspective+"px)"}if(l.translateX!==0||l.translateY!==0||l.translateZ!==0){k+=" translate3d("+l.translateX+"px,"+l.translateY+"px,"+l.translateZ+"px)"}if(l.rotateX!==0){k+=" rotateX("+l.rotateX+"deg)"}if(l.rotateY!==0){k+=" rotateY("+l.rotateY+"deg)"}if(l.rotateZ!==0){k+=" rotateZ("+l.rotateZ+"deg)"}if(l.scaleX!==1||l.scaleY!==1||l.scaleZ!==1){k+=" scale3d("+l.scaleX+","+l.scaleY+","+l.scaleZ+")"}return k},_drawCanvas:function(k){this._updateCanvasContext(k);if(this._cacheCanvas){k.drawImage(this._cacheCanvas,0,0)}else{this.draw(k)}},_updateCanvasContext:function(l){var n=this._updateMatrix2D(),m=this._getAnchorX(),k=this._getAnchorY(),o=this.shadow;if(m===0&&k===0){l.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)}else{l.transform(n.a,n.b,n.c,n.d,n.tx+m,n.ty+k);l.transform(1,0,0,1,-m,-k)}l.globalAlpha*=this.alpha;l.globalCompositeOperation=this.blendMode;if(o){l.shadowOffsetX=o.offsetX;l.shadowOffsetY=o.offsetY;l.shadowBlur=o.blur;l.shadowColor=o.color}},_getAnchorX:function(){return this.width*this.transform.originX},_getAnchorY:function(){return this.height*this.transform.originY},_updateMatrix2D:function(l){var k=this._matrix2d.identity(),m=this.transform;if(l){return k.rotate(-m.rotate%360*i.DEG_TO_RAD).scale(m.scaleX,m.scaleY)}else{return k.appendTransform(this.x+m.translateX,this.y+m.translateY,m.scaleX,m.scaleY,m.rotate,m.skewX,m.skewY)}}});return f});define("Container",["require","exports","module","DisplayObject"],function(d,c,e){var b=d("DisplayObject");var a=b.extend({init:function(f){this._super(f);this._initEvents()},_initEvents:function(){var n=this,g=this.elem,k,m,j,h;var l=function(o){o.preventDefault();k=n._hitTest(o.target);n._triggerEvent("mousedown",k,o.offsetX,o.offsetY);m=false;j=o.offsetX;h=o.offsetY},i=function(o){o.preventDefault();n._triggerEvent("mouseup",k,o.offsetX,o.offsetY);if(!m){n._triggerEvent("click",k,o.offsetX,o.offsetY)}k=null},f=function(o){o.preventDefault();n._triggerEvent("mousemove",k,o.offsetX,o.offsetY);if(!m&&(Math.abs(o.offsetX-j)>3||Math.abs(o.offsetY-h)>3)){m=true}};if(!g.addEventListener){g.addEventListener=g.attachEvent}g.addEventListener("mousedown",l);g.addEventListener("mouseup",i);g.addEventListener("mousemove",f)},_triggerEvent:function(g,j,i,h){if(j){var f={type:g,target:j,mouseX:i,mouseY:h,offsetX:i,offsetY:h};while(j){j.trigger(f);j=j.parent}}},_hitTest:function(f){var g;while(!g&&f&&f!==this.elem){g=f.displayObj;f=f.parentNode}return g}});return a});define("Canvas",["require","exports","module","DisplayObject","Matrix2D"],function(d,c,e){var b=d("DisplayObject"),f=d("Matrix2D");var a=b.extend({_tagName:"canvas",_context2d:null,_useElemSize:true,init:function(g){this._super(g);this._initEvents();this._context2d=this.elem.getContext("2d")},removeAllChildren:function(){var h=this._children,g,i;while(h.length){g=h.length-1;i=h[g];i.parent=null;h.splice(g,1)}},eachChildren:function(k){var j=this._children;for(var h=0,g=j.length;h<g;h++){k(j[h],h)}},update:function(){var g=this._context2d;g.clearRect(0,0,this.width,this.height);this.draw(g)},_initEvents:function(){var o=this,h=this.elem,l,n,k,i;var m=function(p){p.preventDefault();l=o._hitTest(o._children,p.offsetX,p.offsetY);o._triggerEvent("mousedown",l,p.offsetX,p.offsetY);n=false;k=p.offsetX;i=p.offsetY},j=function(p){p.preventDefault();o._triggerEvent("mouseup",l,p.offsetX,p.offsetY);if(!n){o._triggerEvent("click",l,p.offsetX,p.offsetY)}l=null},g=function(p){p.preventDefault();o._triggerEvent("mousemove",l,p.offsetX,p.offsetY);if(!n&&(Math.abs(p.offsetX-k)>3||Math.abs(p.offsetY-i)>3)){n=true}};if(!h.addEventListener){h.addEventListener=h.attachEvent}h.addEventListener("mousedown",m);h.addEventListener("mouseup",j);h.addEventListener("mouseout",j);h.addEventListener("mousemove",g)},_triggerEvent:function(h,k,j,i){if(k){var g={type:h,target:k,mouseX:j,mouseY:i,offsetX:j,offsetY:i};while(k){k.trigger(g);k=k.parent}}},_hitTest:function(k,j,g){var l;for(var h=k.length-1;h>=0;h--){l=k[h];if(l._children.length){l=this._hitTest(l._children,j,g);if(l){return l}}else{if(this._hitTestMatrix(l,j,g)){return l}}}return null},_hitTestMatrix:function(k,o,m){if(!k.visible||!k.mouseEnabled){return false}var v=new f(),s=[],B,A,j;while(k&&k!==this){s.unshift(k);k=k.parent}v.append(1,0,0,1,-o,-m);for(var p=0,n=s.length;p<n;p++){k=s[p];j=k._matrix2d;B=k._getAnchorX();A=k._getAnchorY();if(B===0&&A===0){v.append(j.a,j.b,j.c,j.d,j.tx,j.ty)}else{v.append(j.a,j.b,j.c,j.d,j.tx+B,j.ty+A);v.append(1,0,0,1,-B,-A)}}v.invert();var u=v.tx,t=v.ty,g=k.radius,z=k.width,q=k.height;if(g){return g*g>=(u-g)*(u-g)+(t-g)*(t-g)}else{if(z&&q){return u>=0&&u<=z&&t>=0&&t<=q}}return false}});return a});define("Graphics2D",["require","exports","module"],function(b,a,c){var d=function(){};d.get=function(e){return d.shapes[e]};d.commonStyle=function(f,e){if(e.lineWidth===undefined){e.lineWidth=1}f.style("fill",e.fill);f.style("stroke",e.stroke);f.style("lineWidth",e.lineWidth)};d.commonDraw=function(e,g,f){if(g){e.fill()}if(f){e.stroke()}};d.shapes={rect:{type:"rect",init:function(e){this.style("size",e);d.commonStyle(this,e)},draw:function(e){if(this.setFill(e)){e.fillRect(0,0,this.width,this.height)}if(this.setStroke(e)){e.strokeRect(0,0,this.width,this.height)}}},circle:{type:"circle",init:function(e){if(e.angle===undefined){e.angle=360}this.style("radius",e.radius);this.style("angle",e.angle);d.commonStyle(this,e)},draw:function(f){var e=this.radius,h=this.setFill(f),g=this.setStroke(f);f.beginPath();f.arc(e,e,e,0,this.angle/360*Math.PI*2,0);if(this.angle<360){f.lineTo(e,e)}f.closePath();d.commonDraw(f,h,g)}},ellipse:{type:"ellipse",init:function(e){this.style("radiusXY",e);d.commonStyle(this,e)},draw:function(o){var g=0.5522848,f=this.radiusX,e=this.radiusY,m=f*g,l=e*g,n=f*2,i=e*2,j=this.setFill(o),p=this.setStroke(o);o.beginPath();o.moveTo(0,e);o.bezierCurveTo(0,e-l,f-m,0,f,0);o.bezierCurveTo(f+m,0,n,e-l,n,e);o.bezierCurveTo(n,e+l,f+m,i,f,i);o.bezierCurveTo(f-m,i,0,e+l,0,e);o.closePath();d.commonDraw(o,j,p)}},line:{type:"line",init:function(e){if(e.lineWidth===undefined){e.lineWidth=1}this.path=e.path;this.style("stroke",e.stroke);this.style("lineWidth",e.lineWidth)},draw:function(g){var k=this.path,f,h=this.setStroke(g);if(h&&k.length>1){g.beginPath();for(var j=0,e=k.length;j<e;j++){f=k[j];if(j===0){g.moveTo(f[0],f[1])}else{if(f.length===2){g.lineTo(f[0],f[1])}else{if(f.length===4){g.quadraticCurveTo(f[0],f[1],f[2],f[3])}else{if(f.length===6){g.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])}}}}}g.stroke()}}},ploygon:{type:"ploygon",init:function(e){this.path=e.path;d.commonStyle(this,e)},draw:function(g){var m=this.path,f,j=this.setFill(g),h=this.setStroke(g);if(m.length>2){g.beginPath();for(var k=0,e=m.length;k<e;k++){f=m[k];if(k===0){g.moveTo(f[0],f[1])}else{if(f.length===2){g.lineTo(f[0],f[1])}else{if(f.length===4){g.quadraticCurveTo(f[0],f[1],f[2],f[3])}else{if(f.length===6){g.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])}}}}}g.closePath();d.commonDraw(g,j,h)}}},polyStar:{type:"polyStar",init:function(e){this.sides=e.sides;this.cohesion=e.cohesion;this.style("radius",e.radius);d.commonStyle(this,e)},draw:function(n){var j=this.radius,e=this.sides,m=this.cohesion,f,l,k,h=this.setFill(n),o=this.setStroke(n);n.beginPath();for(var g=0;g<e;g++){f=g/e*Math.PI*2;l=(1-Math.sin(f))*j;k=(1-Math.cos(f))*j;if(g===0){n.moveTo(l,k)}else{n.lineTo(l,k)}if(m){f+=Math.PI/e;l=(1-Math.sin(f)*m)*j;k=(1-Math.cos(f)*m)*j;n.lineTo(l,k)}}n.closePath();d.commonDraw(n,h,o)}},roundRect:{type:"roundRect",init:function(){},draw:function(){}},lines:{type:"lines",init:function(e){if(e.lineWidth===undefined){e.lineWidth=1}this.paths=e.paths;this.style("stroke",e.stroke);this.style("lineWidth",e.lineWidth)},draw:function(k){var m=this.paths,n,p,o=this.setStroke(k);if(o&&m.length){k.beginPath();for(var f=0,g=m.length;f<g;f++){n=m[f];if(n.length>1){for(var h=0,e=n.length;h<e;h++){p=n[h];if(h===0){k.moveTo(p[0],p[1])}else{if(p.length===2){k.lineTo(p[0],p[1])}else{if(p.length===4){k.quadraticCurveTo(p[0],p[1],p[2],p[3])}else{if(p.length===6){k.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5])}}}}}}}k.stroke()}}}};return d});define("Shape",["require","exports","module","DisplayObject","Graphics2D"],function(c,b,d){var a=c("DisplayObject"),e=c("Graphics2D");var f=a.extend({graphics:null,snapToPixel:true,init:function(g){this._super(g);this._initGraphics(g.graphics)},draw:function(g){if(this.graphics){this.graphics.draw.call(this,g)}},setFill:function(g){var h=this.fillColor,k=this.fillGradient,j=this.fillImage;if(j){if(j.complete){h=g.createPattern(j,"no-repeat")}}else{if(k){switch(k[0]){case"top":case"bottom":h=g.createLinearGradient(0,0,0,this.height);break;case"left":case"right":h=g.createLinearGradient(0,0,this.width,0);break;case"left top":h=g.createLinearGradient(0,0,this.width,this.height);break;case"right top":h=g.createLinearGradient(this.width,0,0,this.height);break;case"center":var l=this.width/2,i=this.height/2;h=g.createRadialGradient(l,i,0,l,i,l>i?l:i);break}h.addColorStop(0,k[1]);h.addColorStop(1,k[2])}}if(h){g.fillStyle=h;return true}return false},setStroke:function(h){var j=this.strokeColor,g=this.lineWidth;if(j&&g){h.strokeStyle=j;h.lineWidth=g;h.lineCap=this.lineCap||"round";h.lineJoin=this.lineJoin||"round";if(this.snapToPixel&&g===1){var i=this._matrix2d;h.translate(i.tx>=0?0.5:-0.5,i.ty>=0?0.5:-0.5)}return true}return false},_initGraphics:function(h){var i=h.type,g=i?e.get(i):h;if(g&&g.init&&g.draw){this.graphics=g;g.init.call(this,h)}}});return f});define("Filter",["require","exports","module"],function(c,b,d){var a=function(){};a.get=function(h,f,g){var e=a.filters[f];if(e){return e(h,g)}};a.filters={grayscale:function(j,n){var g=document.createElement("canvas");g.width=j.width;g.height=j.height;var o=g.getContext("2d");o.drawImage(j,0,0);var e=o.getImageData(0,0,g.width,g.height),k=e.data,f;for(var m=0,h=k.length;m<h;m+=4){f=(k[m]+k[m+1]+k[m+2])/3;k[m]=k[m+1]=k[m+2]=f}o.putImageData(e,0,0);return g},brightness:function(h,g){var f=document.createElement("canvas");f.width=h.width;f.height=h.height;var e=f.getContext("2d");e.drawImage(h,0,0);e.globalCompositeOperation="lighter";e.drawImage(h,0,0);return f},impression:function(k,p){var g=document.createElement("canvas");g.width=k.width;g.height=k.height;var r=g.getContext("2d");r.drawImage(k,0,0);var e=r.getImageData(0,0,g.width,g.height),n=e.data,q=["1","0"],j=[];for(var m=0,h=n.length;m<h;m+=16){if(Math.floor(m/4/g.width)%4){continue}j.push(["rgba("+n[m]+","+n[m+1]+","+n[m+2]+","+n[m+3]+")",q[Math.floor(Math.random()*q.length)],m/4%g.width,Math.floor(m/4/g.width)])}r.clearRect(0,0,g.width,g.height);r.font="40px Microsoft Yahei";r.textBaseline="middle";r.textAlign="center";r.globalAlpha=0.25;var o,f;while(j.length){o=Math.floor(Math.random()*j.length);f=j[o];r.fillStyle=f[0];r.fillText(f[1],f[2],f[3]);j.splice(o,1)}return g},rilievo:function(j,q){var g=document.createElement("canvas");g.width=j.width;g.height=j.height;var r=g.getContext("2d");r.drawImage(j,0,0);var e=r.getImageData(0,0,g.width,g.height),m=e.data,n,p,f,o=function(i){if(i<0){i=0}else{if(i>255){i=255}}return i};for(var k=0,h=m.length;k<h;k+=4){n=k+4;if(m[n]===undefined){n=k}p=Math.floor((m[n]+m[n+1]+m[n+2])-(m[k]+m[k+1]+m[k+2]));f=o(p+128);m[k]=m[k+1]=m[k+2]=f}r.putImageData(e,0,0);return g}};return a});define("Bitmap",["require","exports","module","DisplayObject","Filter"],function(d,e,b){var f=d("DisplayObject"),a=d("Filter");var i=!!document.createElement("canvas").getContext,c=document.createElement("div").style,g=c.webkitTransform===""?"webkit":c.WebkitTransform===""?"Webkit":c.msTransform===""?"ms":c.MozTransform===""?"Moz":"ct";var h=f.extend({_image:null,_sourceRect:null,_sourceCanvas:null,_scaleToFit:false,init:function(j){this._super(j);this._initImage(j)},_initImage:function(j){var k=j.image;if(j.sourceRect){this._sourceRect=j.sourceRect;this.style("size",{width:this._sourceRect[2],height:this._sourceRect[3]})}else{if(j.scaleToFit){this._scaleToFit=j.scaleToFit}}if(this.renderMode===0){this.elemStyle.backgroundImage="url("+k+")";this.elemStyle.backgroundRepeat="no-repeat";if(this._sourceRect){this.elemStyle.backgroundPosition="-"+this._sourceRect[0]+"px -"+this._sourceRect[1]+"px"}else{if(this._scaleToFit){this.elemStyle.backgroundSize="100% 100%"}}}else{if(this.renderMode===1){if(typeof(k)==="string"){this._image=new Image();this._image.src=k}else{this._image=k}}}},draw:function(j){if(this._image.complete){var k=this._sourceCanvas||this._image;if(this._sourceRect){j.drawImage(k,this._sourceRect[0],this._sourceRect[1],this.width,this.height,0,0,this.width,this.height)}else{if(this._scaleToFit){j.drawImage(k,0,0,k.width,k.height,0,0,this.width,this.height)}else{j.drawImage(k,0,0,this.width,this.height,0,0,this.width,this.height)}}}},applyFilter:function(k,l){if(this.renderMode===0){this.elemStyle[g+"Filter"]=k?(k+"("+l+")"):""}else{if(this.renderMode===1){var m=this._image;if(m.complete){this._sourceCanvas=(k&&i)?a.get(m,k,l):null}else{var j=this;if(!m.addEventListener){m.addEventListener=m.attachEvent}m.addEventListener("load",function(){j.applyFilter(k,l)})}}}}});return h});define("Text",["require","exports","module","DisplayObject"],function(c,b,d){var a=c("DisplayObject");var e=a.extend({text:null,init:function(f){this._super(f);this._setText(f)},draw:function(f){f.font=this.font;f.textAlign=this.textAlign;f.textBaseline=this.textBaseline;f.fillStyle=this.fillColor;f.fillText(this.text,0,0)},_setText:function(f){this.text=f.text||"";this.font=f.font||"20px Microsoft Yahei";this.textAlign=f.textAlign||"left";this.textBaseline=f.textBaseline||"top";this.fillColor=f.fill||"black";if(this.renderMode===0){this.elem.innerHTML=this.text;this.elemStyle.color=this.fillColor}}});return e});define("Timeline",["require","exports","module","Class","Ease"],function(c,b,d){var a=c("Class"),e=c("Ease");var f=a.extend({_paused:true,_loop:false,_targets:null,_currentTarget:null,_deltaTime:-1,_duration:-1,init:function(g){this._paused=false;this._loop=!!g;this._targets=[];this._deltaTime=0;this._duration=0},play:function(g){if(typeof(g)==="number"){this.gotoAndPlay(g)}else{this._paused=false}},stop:function(){this._paused=true},gotoAndPlay:function(g){this._paused=false;this._deltaTime=g},has:function(j){var g=this._targets;for(var h=g.length-1;h>=0;h--){if(g[h]===j){return true}}return false},get:function(g){if(!this.has(g)){this.removeKeyframes(g);g.data("tl_queue",[]);g.data("tl_start",{});this._targets.push(g)}this._currentTarget=g;return this},getTime:function(){return this._deltaTime},addKeyframe:function(q,k,p,t){var o=this._currentTarget,n=o.data("tl_queue"),g=o.data("tl_start");for(var m in q){g[m]=this._clone(o.style(m))}n.push([q,k,p||"linear",t]);n.sort(function(l,i){return l[1]-i[1]});var r=[],h,s=0;for(var m=0,j=n.length;m<j;m++){h=n[m];r.push({from:s,to:h[1],start:g,end:h[0],easing:h[2],callback:h[3]});s=h[1];g=this._merge(g,h[0])}if(this._duration<s){this._duration=s}o.data("tl_steps",r);return this},removeKeyframes:function(g){g.data("tl_queue",null);g.data("tl_start",null);g.data("tl_steps",null);g.data("tl_cur_step",null)},update:function(q){if(this._paused){return}var o=this._targets,p,h;var g=this._deltaTime,m=this._duration;for(var n=0,j=o.length;n<j;n++){p=o[n];h=this._getStep(p,g);if(h){this._updateStep(p,h,g);if(g===m&&h.to===m&&h.callback){h.callback(g)}}}if(g===m){if(this._loop){this._deltaTime=0}else{this.stop()}}else{var k=g+q;this._deltaTime=k>m?m:k}},_getStep:function(p,j){var m=p.data("tl_cur_step");if(m){if(j>=m.from&&j<=m.to){return m}else{if(j>m.to&&m.callback){m.callback(j)}p.data("tl_cur_step",null)}}var h=p.data("tl_steps"),o=h[h.length-1].to,n;if(j<=o){for(var k=0,g=h.length;k<g;k++){n=h[k];if(j>=n.from&&j<=n.to){p.style(n.start);p.data("tl_cur_step",n);return n}}}return null},_updateStep:function(n,j,h){if(j.to===j.from){n.style(j.end);return}var l=j.to-j.from,p=e.get(j.easing),o=(h-j.from)/l,q=p(o,o,0,1,1),g=j.start,k=j.end;for(var m in k){n._stepStyle(m,{pos:q,start:g[m],end:k[m]})}},_clone:function(h){var g;if(typeof(h)==="object"){g={};for(var j in h){g[j]=this._clone(h[j])}}else{g=h}return g},_merge:function(h,m){var g=this._clone(h);if(typeof(m)==="object"){for(var l in m){if(typeof(g[l])==="object"&&typeof(m[l])==="object"){for(var k in m[l]){g[l][k]=m[l][k]}}else{g[l]=m[l]}}}else{g=m}return g}});return f});define("Sprite",["require","exports","module","DisplayObject"],function(d,b,e){var a=d("DisplayObject");var c=a.extend({_paused:true,_images:null,_imageIndex:-1,_frames:null,_frameIndex:-1,_currentFrame:null,_animations:null,_currentAnimation:null,_deltaTime:-1,init:function(f){this._super(f);this._initSpriteSheet(f.spriteSheet)},play:function(f){if(typeof(f)==="string"){this.playAnimation(f)}else{if(typeof(f)==="number"){this.gotoAndPlay(f)}else{this._paused=false}}},stop:function(){this._paused=true},gotoAndPlay:function(f){this._paused=false;this._currentAnimation=null;this._frameIndex=f},gotoAndStop:function(f){this._paused=true;this._currentAnimation=null;this._frameIndex=f},playAnimation:function(f){this._paused=false;var g=this._animations[f];if(g){this._currentAnimation=g;this._frameIndex=g.start;this._deltaTime=0}},update:function(m){if(this._paused){return}this._updateFrame();var h,l,f,i,k,j=this._currentAnimation;if(j){h=j.name;l=j.start;f=j.end;i=j.next;k=j.duration}else{h=null;l=0;f=this._frames.length-1;i=true;k=0}var g;if(k>0){this._deltaTime+=m;g=Math.floor((f-l+1)*(this._deltaTime/k)+l)}else{g=this._frameIndex+1}if(g>f){if(typeof(i)==="string"){this.playAnimation(i)}else{if(i===true){this._frameIndex=l}else{this.stop()}}this.trigger("animationEnd",{type:"animationEnd",name:h})}else{this._frameIndex=g}},draw:function(f){var h=this._currentFrame;if(h){var g=this._images[h[4]];if(g&&g.complete){f.drawImage(g,h[0],h[1],h[2],h[3],h[5],h[6],h[2],h[3])}}},_initSpriteSheet:function(f){this._initImages(f.images);this._initFrames(f.frames);this._initAnimations(f.animations)},_initImages:function(f){this._images=[];var j;for(var h=0,g=f.length;h<g;h++){if(this.renderMode===0){j=f[h]}else{j=new Image();j.src=f[h]}this._images.push(j)}},_initFrames:function(n,f){if(!f){this._frames=[]}if(n instanceof Array){for(var m=0,g=n.length;m<g;m++){if(n[m] instanceof Array){this._frames.push(n[m])}else{this._initFrames(n[m],true)}}}else{for(var h=0,k=n.rows;h<k;h++){for(var m=0,g=n.cols;m<g;m++){if((h*n.cols+m)===n.num){break}else{this._frames.push([m*n.width,h*n.height,n.width,n.height,n.image||0,0,0])}}}}},_initAnimations:function(h){this._animations={};var g;for(var f in h){g=h[f];this._animations[f]={name:f,start:g[0],end:g[1],next:g[2],duration:g[3]}}},_updateFrame:function(){var g=this._currentFrame=this._frames[this._frameIndex];if(g){if(this.width!==g[2]||this.height!==g[3]){this.style("size",{width:g[2],height:g[3]})}if(this.renderMode===0){var f=this.elemStyle;if(this._imageIndex!==g[4]){this._imageIndex=g[4];f.backgroundImage="url("+this._images[g[4]]+")";f.backgroundRepeat="no-repeat"}f.backgroundPosition="-"+g[0]+"px -"+g[1]+"px"}}}});return c});define("ParticleEmitter",["require","exports","module","Shape","Bitmap"],function(c,b,e){var f=c("Shape"),d=c("Bitmap");var a=function(){};a.get=function(g){return a.particles[g]};a.particles={rain:{type:"rain",init:function(m){var k=m.width,g=m.height,n;this.particles=[];this.data("fall_width",k);this.data("fall_height",g);for(var j=0,h=m.num||60;j<h;j++){n=new f({renderMode:this.renderMode,pos:{x:Math.floor(Math.random()*k),y:-Math.floor(Math.random()*g)},graphics:{type:"rect",width:j%6===0?3:2,height:j%3===0?28:20,fill:"#FFF"},alpha:Math.floor(Math.random()*3)/10+0.2});n.data("fall_speed",Math.floor(Math.random()*25)/100+0.25);this.particles.push(n);this.addChild(n)}},update:function(o){var q=this.particles,g=this.data("fall_width"),p=this.data("fall_height"),m,h,n;for(var k=0,j=q.length;k<j;k++){m=q[k];h=m.data("fall_speed")*o;n=m.y;if(n>p){n=-Math.floor(Math.random()*p)}m.style("y",n+h)}}},snow:{type:"snow",init:function(n){var g=n.width,r=n.height,o,j,p,q,k;if(n.image){j=new Image();j.src=n.image}this.particles=[];this.data("fall_width",g);this.data("fall_height",r);for(var m=0,h=n.num||60;m<h;m++){q={x:Math.floor(Math.random()*g),y:-Math.floor(Math.random()*r)};p=Math.floor(Math.random()*8)+12;k=Math.floor(Math.random()*4)/10+0.6;o=j?new d({renderMode:this.renderMode,pos:q,width:p,height:p,scaleToFit:true,image:j,alpha:k}):new f({renderMode:this.renderMode,pos:q,alpha:Math.floor(Math.random()*5)/10+0.3,graphics:{type:"circle",radius:Math.floor(Math.random()*3)+4,fill:"#FFF",angle:360}});o.data("fall_x",o.x);o.data("fall_width",Math.floor(Math.random()*10+10));o.data("fall_speed",Math.floor(Math.random()*15+15)/1000);this.particles.push(o);this.addChild(o)}},update:function(q){var s=this.particles,g=this.data("fall_width"),r=this.data("fall_height"),m,n,h,p,o;for(var k=0,j=s.length;k<j;k++){m=s[k];n=m.data("fall_speed");h=n*q;p=m.data("fall_x");o=m.y;if(o>r){m.fallTime=0;o=-Math.floor(Math.random()*r)}m.style("pos",{x:p+Math.sin(o/(n*2000))*m.data("fall_width"),y:o+h})}}}};return a});define("ParticleSystem",["require","exports","module","DisplayObject","ParticleEmitter"],function(e,d,f){var c=e("DisplayObject"),b=e("ParticleEmitter");var a=c.extend({emitter:null,particles:null,init:function(g){this._super(g);this._initParticle(g.particle)},update:function(g){if(this.emitter){this.emitter.update.call(this,g)}},_initParticle:function(i){var g=i.type,h=g?b.get(g):i;if(h&&h.init&&h.update){this.emitter=h;h.init.call(this,i)}}});return a});define("BoneAnimation",["require","exports","module","DisplayObject","Timeline","Bitmap"],function(d,b,f){var a=d("DisplayObject"),g=d("Timeline"),e=d("Bitmap");var c=a.extend({_paused:true,_bones:null,_animations:null,_currentAnimation:null,_timeline:null,init:function(h){this._super(h);this._initBones(h)},play:function(h){if(typeof(h)==="string"){this.playAnimation(h)}else{this._paused=false}},stop:function(){this._paused=true},playAnimation:function(h){this._paused=false;var i=this._animations[h];if(i){this._currentAnimation=i;this._timeline=this._initTimeline(i)}},update:function(h){if(this._paused){return}if(this._timeline){this._timeline.update(h)}},_initBones:function(n){this._bones={};this._animations={};var h=n.bones,p=n.animations,o,m;for(var k=0,j=h.length;k<j;k++){o=h[k];if(o.image){m=new e({renderMode:this.renderMode,x:0,y:0,width:o.width,height:o.height,image:o.image})}else{m=new a({renderMode:this.renderMode,x:0,y:0,width:o.width,height:o.height})}if(!o.parent){this.addChild(m)}this._bones[o.tag]=m}for(var k=0,j=h.length;k<j;k++){o=h[k];if(o.parent){this._bones[o.parent].addChild(this._bones[o.tag])}}for(var k in p){this._animations[k]=p[k]}},_initTimeline:function(m){var t=new g(true),p,s,r,h;for(var n=0,q=m.length;n<q;n++){p=m[n];s=this._bones[p.tag];r=p.frames;t.get(s);for(var o=0,k=r.length;o<k;o++){h=r[o];t.addKeyframe(h,h.time)}}return t}});return c});define("cartoon",["require","exports","module","Class","Ticker","DisplayObject","Container","Canvas","Shape","Bitmap","Text","Tween","Timeline","Sprite","ParticleSystem","BoneAnimation"],function(c,b,d){var a={Class:c("Class"),Ticker:c("Ticker"),DisplayObject:c("DisplayObject"),Container:c("Container"),Canvas:c("Canvas"),Shape:c("Shape"),Bitmap:c("Bitmap"),Text:c("Text"),Tween:c("Tween"),Timeline:c("Timeline"),Sprite:c("Sprite"),ParticleSystem:c("ParticleSystem"),BoneAnimation:c("BoneAnimation")};return a});