define("Class",[],function(){var e=function(){},t=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return e.extend=function(r){var i=this,s=this.prototype,o=function(){!t&&this.init&&this.init.apply(this,arguments)};i!==e&&(t=!0,o.prototype=new i),t=!1;var u=o.prototype;for(var a in r)u[a]=typeof s[a]=="function"&&typeof r[a]=="function"&&n.test(r[a])?function(e,t){return function(){var n=this._super;this._super=s[e];var r=t.apply(this,arguments);return this._super=n,r}}(a,r[a]):r[a];return o.extend=arguments.callee,o},e}),define("Ticker",["require","exports","module","Class"],function(e,t,n){var r=e("Class"),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,o=r.extend({fps:-1,interval:-1,_paused:!0,_timer:null,_targets:null,init:function(e){e?(this.interval=e,this.fps=(1e3/e).toFixed(2)):(this.interval=16.67,this.fps=60),this._targets=[],o._tickers.push(this)},isActive:function(){return!this._paused},start:function(){this._clearTimer(),this._paused=!1,this._setTimer()},stop:function(){this._paused=!0,this._clearTimer()},has:function(e){var t=this._targets;for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1},add:function(e){e.update instanceof Function&&(e._ticker&&e._ticker.remove(e),e._ticker=this),this._targets.push(e)},remove:function(e){var t=this._targets;for(var n=t.length-1;n>=0;n--)if(t[n]===e){t.splice(n,1),e._ticker&&(e._ticker=null);break}},removeAll:function(){var e=this._targets,t;while(e.length)t=e.pop(),t._ticker&&(t._ticker=null)},_clearTimer:function(){this._timer&&(s(this._timer),this._timer=null)},_setTimer:function(){var e=this,t=e.interval,n=i===window.setTimeout,r=0,s=0,o=0,u=0,a=(t-1)*.97,f=[],l,c,h=function(){return n?!0:s===0?(s=(new Date).getTime(),!0):(o=(new Date).getTime(),o-s>a?(s=o,!0):!1)},p=function(){if(r===0)r=(new Date).getTime();else{o=(new Date).getTime(),u=o-r,u>t*3&&(u=t),r=o,f.push(u);if(f.length>=10){f.splice(0,5),l=0,c=f.length;for(var n=0;n<c;n++)l+=f[n];e.fps=Math.floor(1e3*c/l)}}e._exec(u)},d=function(){h()&&p(),e._clearTimer(),e._paused||(e._timer=i(d,t))};d()},_exec:function(e){var t=this._targets,n;for(var r=0,i=t.length;r<i;r++){if(this._paused)break;n=t[r],n.update instanceof Function?n.update(e):n instanceof Function&&n(e)}}});return o._tickers=[],o.destroy=function(){var e=this._tickers,t;for(var n=0,r=e.length;n<r;n++)t=e[n],t.isActive()&&t.stop()},o}),define("EventDispatcher",["require","exports","module","Class"],function(e,t,n){var r=e("Class"),i=r.extend({_listeners:null,on:function(e,t){this.addEventListener(e,t)},off:function(e,t){this.removeEventListener(e,t)},trigger:function(e){this.dispatchEvent(e)},addEventListener:function(e,t){this._listeners||(this._listeners={});var n=this._listeners,r=n[e];r||(r=n[e]=[],r.indexOf||(r.indexOf=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1})),r.indexOf(t)===-1&&r.push(t)},hasEventListener:function(e,t){if(!this._listeners)return!1;var n=this._listeners,r=n[e];return r&&r.indexOf(t)!==-1?!0:!1},removeEventListener:function(e,t){if(!this._listeners)return;var n=this._listeners,r=n[e];if(r){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}},dispatchEvent:function(e){if(!this._listeners)return;var t=this._listeners,n=t[e.type];if(n){e.target=this;for(var r=0,i=n.length;r<i;r++)n[r].call(this,e)}}});return i}),define("Loader",["require","exports","module","EventDispatcher"],function(e,t,n){var r=e("EventDispatcher"),i=r.extend({_resources:null,_loadQueue:null,_loadQueueLength:-1,init:function(){this._resources={},this._loadQueue=[]},load:function(e){var t=this._loadQueueLength=e.length;for(var n=0;n<t;n++)this._loadQueue.push({type:"image",url:e[n]});t&&this._loadNext()},loadFile:function(e){e.type==="image"&&this._loadImage(e)},getItem:function(e){return this._resources[e]},addItem:function(e,t){this._resources[e]=t},_loadComplete:function(e){var t=1-this._loadQueue.length/this._loadQueueLength;this.trigger({type:"progress",progress:t,file:e}),t<1?this._loadNext():this.trigger({type:"complete"})},_loadNext:function(){this.loadFile(this._loadQueue.shift())},_loadImage:function(e){var t=this,n=new Image;n.src=e.url,n.onload=function(){t._loadComplete(n)},this.addItem(e.url,n)},_loadScript:function(){},_loadJSON:function(){}});return i}),define("Preload",["require","exports","module","Loader"],function(e,t,n){var r=e("Loader");return new r}),define("StyleSheet",["require","exports","module"],function(e,t,n){var r=document.createElement("div").style,i=r.webkitTransform===""?"webkit":r.WebkitTransform===""?"Webkit":r.msTransform===""?"ms":r.MozTransform===""?"Moz":"ct",s=navigator.userAgent.indexOf("MSIE 9.0")>0,o=i==="ct"&&r.filter==="",u=function(){};return u.has=function(e){return!!u.styles[e]},u.init=function(e,t){var n=u.styles[t];if(n&&n.init)return n.init(e,t)},u.get=function(e,t){var n=u.styles[t];if(n)return n.get(e,t)},u.set=function(e,t,n){var r=u.styles[t];r&&r.set(e,t,n)},u.step=function(e,t,n){var r=u.styles[t];r&&r.step&&r.step(e,t,n)},u.commonGet=function(e,t){return e[t]},u.commonSet=function(e,t,n){e[t]=n},u.commonCss=function(e,t,n){var r=t.charAt(0).toUpperCase()+t.substring(1,t.length);e[i+r]=n},u.commonStep=function(e,t,n){var r=n.start,i=n.end,s=n.pos,o=(i-r)*s+r;e.style(t,o)},u.commonSteps=function(e,t,n){var r=n.pos,i=n.start,s=n.end,o={};for(var u in s)o[u]=(s[u]-i[u])*r+i[u];e.style(t,o)},u.toRGBA=function(e){var t={r:0,g:0,b:0,a:1};return e.indexOf("rgb")>-1?(e=e.replace(/rgb\(|rgba\(|\)/g,""),e=e.split(","),t.r=parseInt(e[0]),t.g=parseInt(e[1]),t.b=parseInt(e[2]),e.length===4&&(t.a=e[3])):e.indexOf("#")>-1&&(e.length===4?(t.r=e.substring(1,2),t.g=e.substring(2,3),t.b=e.substring(3,4),t.r=parseInt(t.r+t.r,16),t.g=parseInt(t.g+t.g,16),t.b=parseInt(t.b+t.b,16)):(t.r=parseInt(e.substring(1,3),16),t.g=parseInt(e.substring(3,5),16),t.b=parseInt(e.substring(5,7),16))),t},u.toColor=function(e){var t=e.r.toString(16),n=e.g.toString(16),r=e.b.toString(16);return t.length===1&&(t="0"+t),n.length===1&&(n="0"+n),r.length===1&&(r="0"+r),"#"+t+n+r},u.toGradient=function(e){if(typeof e=="string"){e=e.split(/\,#|\,rgb/);for(var t=1,n=e.length;t<n;t++)e[t]=(e[t].indexOf("(")>-1?"rgb":"#")+e[t]}return e},u.stepColor=function(e,t,n){t=u.toRGBA(t),n=u.toRGBA(n);var r={};for(var i in n)r[i]=Math.floor((n[i]-t[i])*e+t[i]);return u.toColor(r)},u.styles={x:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n);if(e.renderMode===0){var r=e.elemStyle;r.position="absolute",r.left=n+"px"}},step:u.commonStep},y:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n);if(e.renderMode===0){var r=e.elemStyle;r.position="absolute",r.top=n+"px"}},step:u.commonStep},z:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.style("transform3d",{perspective:n})},step:u.commonStep},pos:{get:function(e,t){return{x:e.x,y:e.y}},set:function(e,t,n){n.x!==undefined&&(e.x=n.x),n.y!==undefined&&(e.y=n.y);if(e.renderMode===0){var r=e.elemStyle;r.position="absolute",r.left=e.x+"px",r.top=e.y+"px"}},step:u.commonSteps},width:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.renderMode===0&&(e._useElemSize?e.elem.width=n:e.elemStyle.width=n+"px")},step:u.commonStep},height:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.renderMode===0&&(e._useElemSize?e.elem.height=n:e.elemStyle.height=n+"px")},step:u.commonStep},size:{get:function(e,t){return{width:e.width,height:e.height}},set:function(e,t,n){n.width!==undefined&&(e.width=n.width),n.height!==undefined&&(e.height=n.height);if(e.renderMode===0)if(e._useElemSize){var r=e.elem;r.width=e.width,r.height=e.height}else{var i=e.elemStyle;i.width=e.width+"px",i.height=e.height+"px"}},step:u.commonSteps},transform:{init:function(e,t){return e.transform={translateX:0,translateY:0,rotate:0,scale:1,scaleX:1,scaleY:1,skewX:0,skewY:0,originX:.5,originY:.5},e.transform},get:function(e,t){return e.transform||this.init(e,t)},set:function(e,t,n){var r=this.get(e,t);for(var i in n)e._updateTransform(i,n[i]);if(e.renderMode===0){var s=e.elemStyle;if(o){var a=e.elem,f=s.filter,l=/Matrix([^)]*)/,c=e._updateMatrix2D(!0),h=["Matrix(M11="+c.a,"M12="+c.b,"M21="+c.c,"M22="+c.d,"SizingMethod='auto expand'"].join(",");s.filter=l.test(f)?f.replace(l,h):"progid:DXImageTransform.Microsoft."+h+") "+f,s.marginLeft=r.translateX+(a.clientWidth-a.offsetWidth)*r.originX+"px",s.marginTop=r.translateY+(a.clientHeight-a.offsetHeight)*r.originY+"px"}else u.commonCss(s,"transform",e._mergeTransformText()),("originX"in n||"originY"in n)&&u.commonCss(s,"transformOrigin",r.originX*100+"% "+r.originY*100+"%")}},step:u.commonSteps},transform3d:{init:function(e,t){return e.transform3d={perspective:0,translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,originX:.5,originY:.5,originZ:.5},e.transform3d},get:function(e,t){return e.transform3d||this.init(e,t)},set:function(e,t,n){var r=this.get(e,t);for(var i in n)e._updateTransform3D(i,n[i]);if(e.renderMode===0){var s=e.elemStyle;u.commonCss(s,"transformStyle","preserve-3d"),u.commonCss(s,"backfaceVisibility","visible"),u.commonCss(s,"transform",e._mergeTransform3DText()),("originX"in n||"originY"in n||"originZ"in n)&&u.commonCss(s,"transformOrigin",r.originX*100+"% "+r.originY*100+"%")}},step:u.commonSteps},visible:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.renderMode===0&&(e.elemStyle.display=n?"block":"none")}},overflow:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.renderMode===0&&(e.elemStyle.overflow=n)}},alpha:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n);if(e.renderMode===0){var r=e.elemStyle;if(o){var i=r.filter,s=/alpha\(opacity=([^)]*)/,a="alpha(opacity="+n*100;r.filter=s.test(i)?i.replace(s,a):i+" "+a+")"}else r.opacity=n}},step:u.commonStep},shadow:{get:u.commonGet,set:function(e,t,n){typeof n=="string"&&(n=n.split("px "),n={offsetX:parseFloat(n[0]),offsetY:parseFloat(n[1]),blur:parseFloat(n[2]),color:n[3]}),u.commonSet(e,t,n),e.renderMode===0&&(e.elemStyle.boxShadow=n.offsetX+"px "+n.offsetY+"px "+n.blur+"px "+n.color)},step:u.commonSteps},fill:{regexpColor:/^\#|^rgb|^rgba|black|red|green|blue|yellow|orange|pink|purple|gray/,regexpGradient:/^top|^right|^bottom|^left|^center/,regexpImage:/\.jpg$|\.png$|\.gif$/,get:function(e,t){return e.fillColor||e.fillGradient||e.fillImage},set:function(e,t,n){this.regexpColor.test(n)?e.style("fillColor",n):this.regexpGradient.test(n)?e.style("fillGradient",n):this.regexpImage.test(n)&&e.style("fillImage",n)},step:function(e,t,n){var r=n.end;this.regexpColor.test(r)?e._stepStyle("fillColor",n):this.regexpGradient.test(r)&&e._stepStyle("fillGradient",n)}},fillColor:{get:u.commonGet,set:function(e,t,n){e.fillGradient=e.fillImage=null,u.commonSet(e,t,n),e.renderMode===0&&(e.elemStyle.backgroundColor=n,e.elemStyle.backgroundImage="")},step:function(e,t,n){e.style(t,u.stepColor(n.pos,n.start,n.end))}},fillGradient:{get:u.commonGet,set:function(e,t,n){e.fillColor=e.fillImage=null,n=u.toGradient(n),u.commonSet(e,t,n);if(e.renderMode===0){var r=e.elemStyle,i;if(o||s){var a=r.filter,f=/gradient([^)]*)/;i="gradient(GradientType=0,startColorstr='"+n[1]+"', endColorstr='"+n[2]+"'",r.filter=f.test(a)?a.replace(f,i):a+" progid:DXImageTransform.Microsoft."+i+")"}else n[0]==="center"?i="radial-gradient(circle,"+n[1]+","+n[2]+")":i="linear-gradient("+n[0]+","+n[1]+","+n[2]+")",r.backgroundImage="-webkit-"+i,r.backgroundImage="-ms-"+i,r.backgroundImage="-moz-"+i}},step:function(e,t,n){var r=n.start,i=n.end,i=u.toGradient(i),s=n.pos,o=[i[0]];o.push(u.stepColor(s,r[1],i[1])),o.push(u.stepColor(s,r[2],i[2])),e.style(t,o)}},fillImage:{get:u.commonGet,set:function(e,t,n){e.fillColor=e.fillGradient=null;if(e.renderMode===0)e.elemStyle.backgroundImage="url("+n+")";else{var r=new Image;r.src=n,n=r}u.commonSet(e,t,n)}},stroke:{get:function(e,t){return e.strokeColor},set:function(e,t,n){e.style("strokeColor",n)},step:function(e,t,n){e._stepStyle("strokeColor",n)}},strokeColor:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n);if(e.renderMode===0){var r=e.elemStyle;r.borderColor=n,r.borderStyle="solid"}},step:function(e,t,n){e.style(t,u.stepColor(n.pos,n.start,n.end))}},lineWidth:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.renderMode===0&&(e.elemStyle.borderWidth=n+"px")},step:u.commonStep},radius:{get:u.commonGet,set:function(e,t,n){u.commonSet(e,t,n),e.width=e.height=n*2;if(e.renderMode===0){var r=e.elemStyle;r.borderRadius="50%",r.width=r.height=e.width+"px"}},step:u.commonStep},angle:{get:u.commonGet,set:u.commonSet,step:u.commonStep},radiusXY:{get:function(e,t){return{radiusX:e.radiusX,radiusY:e.radiusY}},set:function(e,t,n){n.radiusX!==undefined&&(e.radiusX=n.radiusX,e.width=e.radiusX*2),n.radiusY!==undefined&&(e.radiusY=n.radiusY,e.height=e.radiusY*2);if(e.renderMode===0){var r=e.elemStyle;r.borderRadius="50%",r.width=e.width+"px",r.height=e.height+"px"}},step:u.commonSteps}},u}),define("PrivateData",["require","exports","module","Class"],function(e,t,n){var r=e("Class"),i=r.extend({_data:null,init:function(){this._data={}},get:function(e){return this._data[e]},set:function(e,t){return this._data[e]=t,t}});return i}),define("Matrix2D",["require","exports","module","Class"],function(e,t,n){var r=e("Class"),i=Math.PI/180,s=r.extend({a:1,b:0,c:0,d:1,tx:0,ty:0,prepend:function(e,t,n,r,i,s){var o=this.tx;if(e!=1||t!=0||n!=0||r!=1){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},append:function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},prependMatrix:function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this},appendMatrix:function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this},prependTransform:function(e,t,n,r,s,o,u){if(s%360)var a=s*i,f=Math.cos(a),l=Math.sin(a);else f=1,l=0;return o||u?(o*=i,u*=i,this.prepend(f*n,l*n,-l*r,f*r,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),e,t)):this.prepend(f*n,l*n,-l*r,f*r,e,t),this},appendTransform:function(e,t,n,r,s,o,u){if(s%360)var a=s*i,f=Math.cos(a),l=Math.sin(a);else f=1,l=0;return o||u?(o*=i,u*=i,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),e,t),this.append(f*n,l*n,-l*r,f*r,0,0)):this.append(f*n,l*n,-l*r,f*r,e,t),this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,s=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this},skew:function(e,t){return e*=i,t*=i,this.append(Math.cos(t),Math.sin(t),-Math.sin(e),Math.cos(e),0,0),this},scale:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},translate:function(e,t){return this.tx+=e,this.ty+=t,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},isIdentity:function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},transformPoint:function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n}});return s}),define("Ease",["require","exports","module"],function(e,t,n){var r=function(){};r.get=function(e){return i[e]||i.linear};var i={none:function(e){return e>=1?1:0},linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,s){return r-i.easeOutBounce(e,s-t,0,r,s)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,s){return t<s/2?i.easeInBounce(e,t*2,0,r,s)*.5+n:i.easeOutBounce(e,t*2-s,0,r,s)*.5+r*.5+n},easeIn:function(e,t,n,r,s){return i.easeInQuad(e,t,n,r,s)},easeOut:function(e,t,n,r,s){return i.easeOutQuad(e,t,n,r,s)},easeInOut:function(e,t,n,r,s){return i.easeInOutQuad(e,t,n,r,s)},expoIn:function(e,t,n,r,s){return i.easeInExpo(e,t,n,r,s)},expoOut:function(e,t,n,r,s){return i.easeOutExpo(e,t,n,r,s)},expoInOut:function(e,t,n,r,s){return i.easeInOutExpo(e,t,n,r,s)},bounceIn:function(e,t,n,r,s){return i.easeInBounce(e,t,n,r,s)},bounceOut:function(e,t,n,r,s){return i.easeOutBounce(e,t,n,r,s)},bounceInOut:function(e,t,n,r,s){return i.easeInOutBounce(e,t,n,r,s)},elasIn:function(e,t,n,r,s){return i.easeInElastic(e,t,n,r,s)},elasOut:function(e,t,n,r,s){return i.easeOutElastic(e,t,n,r,s)},elasInOut:function(e,t,n,r,s){return i.easeInOutElastic(e,t,n,r,s)},backIn:function(e,t,n,r,s){return i.easeInBack(e,t,n,r,s)},backOut:function(e,t,n,r,s){return i.easeOutBack(e,t,n,r,s)},backInOut:function(e,t,n,r,s){return i.easeInOutBack(e,t,n,r,s)}};return r.easing=i,jQuery&&jQuery.extend(jQuery.easing,i),r}),define("Tween",["require","exports","module","Class","Ease"],function(e,t,n){var r=e("Class"),i=e("Ease"),s=r.extend({_done:!1,_target:null,_deltaTime:-1,_start:null,_end:null,_duration:null,_easing:null,_callback:null,_frameDone:null,init:function(e,t){this._target=e,this._deltaTime=0;var n=t.start,r=t.end;if(n)e.style(n);else{n={};for(var s in r)n[s]=this._clone(e.style(s))}this._start=n,this._end=r,this._duration=t.duration,this._easing=i.get(t.easing),this._callback=t.callback,this._frameDone=t.frameDone},update:function(e){if(this._done)return;var t=this._target,n=this._start,r=this._end,i=this._duration,s=this._easing,o=this._deltaTime,u=o/i,a=s(u,u,0,1,1);for(var f in r)t._stepStyle(f,{pos:a,start:n[f],end:r[f]});this._frameDone&&this._frameDone(u,a);if(o===i)this._done=!0,this._callback&&this._callback();else{var l=o+e;this._deltaTime=l>i?i:l}},_clone:function(e){var t;if(typeof e=="object"){t={};for(var n in e)t[n]=this._clone(e[n])}else t=e;return t}});return s._tweens=[],s._currentTarget=null,s.update=function(e){var t=this._tweens;for(var n=t.length-1;n>=0;n--)t[n]._done&&t.splice(n,1);for(var n=0,r=t.length;n<r;n++)t[n].update(e)},s.get=function(e){return this._currentTarget=e,this},s.addTween=function(e,t,n,r,i){var o=this._currentTarget,u=o.data("fx_queue");typeof e=="number"&&(r=t,t=e,e={},n="none");var a=function(){r&&r(),u=o.data("fx_queue"),u&&u.length>0?u.shift()():o.data("fx_queue",null)},f=function(){var r=new s(o,{start:null,end:e,duration:t||300,easing:n||"linear",callback:a,frameDone:i});s._tweens.push(r)};u?u.push(f):(f(),o.data("fx_queue",[]))},s}),define("DisplayObject",["require","exports","module","EventDispatcher","PrivateData","StyleSheet","Matrix2D","Tween"],function(e,t,n){var r=e("EventDispatcher"),i=e("PrivateData"),s=e("StyleSheet"),o=e("Matrix2D"),u=e("Tween"),a=!!document.createElement("canvas").getContext,f=r.extend({x:0,y:0,width:0,height:0,visible:!0,overflow:"visible",alpha:1,shadow:null,transform:null,transform3d:null,parent:null,elem:null,elemStyle:null,renderMode:0,blendMode:"source-over",mouseEnabled:!0,_tagName:"div",_children:null,_matrix2d:null,_privateData:null,init:function(e){e||(e={}),e.renderMode&&(this.renderMode=e.renderMode);if(this.renderMode===0){var t=e.elem;t&&typeof t=="string"&&(t=document.querySelector?document.querySelector(t):null),this.elem=t||document.createElement(this._tagName),this.elem.displayObj=this,this.elemStyle=this.elem.style,jQuery&&(this.$=jQuery(this.elem))}else e.blendMode&&(this.blendMode=e.blendMode);this._children=[],this._matrix2d=new o,this._privateData=new i;for(var n in e)s.has(n)&&this.style(n,e[n]);this.transform||s.init(this,"transform")},addChild:function(e){e.parent&&e.parent.removeChild(e),e.parent=this,e.renderMode===0?this.elem&&this.elem.appendChild(e.elem):this._children.push(e)},removeChild:function(e){if(e.parent===this){e.parent=null;if(e.renderMode===0)this.elem&&this.elem.removeChild(e.elem);else{var t=this._children;for(var n=t.length-1;n>=0;n--)if(t[n]===e){t.splice(n,1);break}}}},removeAllChildren:function(){var e,t;if(this.renderMode===0){var n=this.elem;e=n.children;while(e.length)t=e[e.length-1],t.displayObj&&(t.displayObj.parent=null),n.removeChild(t)}else{var r=-1;e=this._children;while(e.length)r=e.length-1,t=e[r],t.parent=null,e.splice(r,1)}},eachChildren:function(e){var t=this.renderMode===0?this.elem.children:this._children,n;for(var r=0,i=t.length;r<i;r++)n=this.renderMode===0?t[r].displayObj:t[r],n&&e(n,r)},enableEvents:function(e){this.mouseEnabled=e?!0:!1,this.renderMode===0&&(this.elemStyle.pointerEvents=e?"auto":"none")},style:function(e,t){if(t===undefined){if(typeof e!="object")return s.get(this,e);for(var n in e)s.set(this,n,e[n])}else s.set(this,e,t)},data:function(e,t){if(t===undefined)return this._privateData.get(e);this._privateData.set(e,t)},to:function(e,t,n,r,i){return u.get(this).addTween(e,t,n,r,i),this},draw:function(e){if(!this._children.length)return;this.overflow==="hidden";var t=this._children,n;for(var r=0,i=t.length;r<i;r++)n=t[r],n.visible&&(e.save(),n._drawCanvas(e),e.restore())},cache:function(){if(a){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.draw(e.getContext("2d")),this._cacheCanvas=e}},uncache:function(){this._cacheCanvas=null},_stepStyle:function(e,t){s.step(this,e,t)},_updateTransform:function(e,t){e==="scale"?this.transform.scale=this.transform.scaleX=this.transform.scaleY=t:e in this.transform&&(this.transform[e]=t)},_updateTransform3D:function(e,t){e in this.transform3d&&(this.transform3d[e]=t)},_mergeTransformText:function(){var e=this.transform,t="";if(e.translateX!==0||e.translateY!==0)t+="translate("+e.translateX+"px,"+e.translateY+"px"+")";e.rotate!==0&&(t+=" rotate("+e.rotate+"deg)");if(e.scaleX!==1||e.scaleY!==1)t+=" scale("+e.scaleX+","+e.scaleY+")";if(e.skewX!==0||e.skewY!==0)t+=" skew("+e.skewX+"deg,"+e.skewY+"deg)";return t},_mergeTransform3DText:function(){var e=this.transform3d,t="";e.perspective!==0&&(t+="perspective("+e.perspective+"px)");if(e.translateX!==0||e.translateY!==0||e.translateZ!==0)t+=" translate3d("+e.translateX+"px,"+e.translateY+"px,"+e.translateZ+"px)";e.rotateX!==0&&(t+=" rotateX("+e.rotateX+"deg)"),e.rotateY!==0&&(t+=" rotateY("+e.rotateY+"deg)"),e.rotateZ!==0&&(t+=" rotateZ("+e.rotateZ+"deg)");if(e.scaleX!==1||e.scaleY!==1||e.scaleZ!==1)t+=" scale3d("+e.scaleX+","+e.scaleY+","+e.scaleZ+")";return t},_drawCanvas:function(e){this._updateCanvasContext(e),this._cacheCanvas?e.drawImage(this._cacheCanvas,0,0):this.draw(e)},_updateCanvasContext:function(e){var t=this._updateMatrix2D(),n=this._getAnchorX(),r=this._getAnchorY(),i=this.shadow;n===0&&r===0?e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty):(e.transform(t.a,t.b,t.c,t.d,t.tx+n,t.ty+r),e.transform(1,0,0,1,-n,-r)),e.globalAlpha*=this.alpha,e.globalCompositeOperation=this.blendMode,i&&(e.shadowOffsetX=i.offsetX,e.shadowOffsetY=i.offsetY,e.shadowBlur=i.blur,e.shadowColor=i.color)},_getAnchorX:function(){return this.width*this.transform.originX},_getAnchorY:function(){return this.height*this.transform.originY},_updateMatrix2D:function(e){var t=this._matrix2d.identity(),n=this.transform;return e?t.rotate(-n.rotate%360*o.DEG_TO_RAD).scale(n.scaleX,n.scaleY):t.appendTransform(this.x+n.translateX,this.y+n.translateY,n.scaleX,n.scaleY,n.rotate,n.skewX,n.skewY)}});return f}),define("Container",["require","exports","module","DisplayObject"],function(e,t,n){var r=e("DisplayObject"),i=r.extend({init:function(e){this._super(e),this._initEvents()},_initEvents:function(){var e=this,t=this.elem,n,r,i,s,o,u,a=function(t){t.preventDefault(),n=e._getMouseX(t),r=e._getMouseY(t),i=e._hitTest(t.target)||e,e._triggerEvent("mousedown",i,n,r),s=!1,o=n,u=r},f=function(t){t.preventDefault(),e._triggerEvent("mouseup",i,n,r),s||e._triggerEvent("click",i,n,r),i=null},l=function(t){t.preventDefault(),n=e._getMouseX(t),r=e._getMouseY(t),e._triggerEvent("mousemove",i,n,r),!s&&(Math.abs(n-o)>3||Math.abs(r-u)>3)&&(s=!0)};t.addEventListener||(t.addEventListener=t.attachEvent),t.addEventListener("mousedown",a),t.addEventListener("mouseup",f),t.addEventListener("mousemove",l)},_getMouseX:function(e){var t=this.elem.getBoundingClientRect().left;return e.clientX-t},_getMouseY:function(e){var t=this.elem.getBoundingClientRect().top;return e.clientY-t},_triggerEvent:function(e,t,n,r){if(t){var i={type:e,target:t,mouseX:n,mouseY:r};while(t)t.trigger(i),t=t.parent}},_hitTest:function(e){var t;while(!t&&e&&e!==this.elem)t=e.displayObj,e=e.parentNode;return t}});return i}),define("Canvas",["require","exports","module","DisplayObject","Matrix2D"],function(e,t,n){var r=e("DisplayObject"),i=e("Matrix2D"),s=r.extend({_tagName:"canvas",_context2d:null,_useElemSize:!0,init:function(e){this._super(e),this._initEvents(),this._context2d=this.elem.getContext("2d")},removeAllChildren:function(){var e=this._children,t,n;while(e.length)t=e.length-1,n=e[t],n.parent=null,e.splice(t,1)},eachChildren:function(e){var t=this._children;for(var n=0,r=t.length;n<r;n++)e(t[n],n)},update:function(){var e=this._context2d;e.clearRect(0,0,this.width,this.height),this.draw(e)},_initEvents:function(){var e=this,t=this.elem,n,r,i,s,o,u,a=function(t){t.preventDefault(),n=e._getMouseX(t),r=e._getMouseY(t),i=e._hitTest(e._children,n,r)||e,e._triggerEvent("mousedown",i,n,r),s=!1,o=n,u=r},f=function(t){t.preventDefault(),e._triggerEvent("mouseup",i,n,r),s||e._triggerEvent("click",i,n,r),i=null},l=function(t){t.preventDefault(),n=e._getMouseX(t),r=e._getMouseY(t),e._triggerEvent("mousemove",i,n,r),!s&&(Math.abs(n-o)>3||Math.abs(r-u)>3)&&(s=!0)};t.addEventListener||(t.addEventListener=t.attachEvent),t.addEventListener("mousedown",a),t.addEventListener("mouseup",f),t.addEventListener("mouseout",f),t.addEventListener("mousemove",l)},_getMouseX:function(e){return e.offsetX===undefined?e.layerX:e.offsetX},_getMouseY:function(e){return e.offsetY===undefined?e.layerY:e.offsetY},_triggerEvent:function(e,t,n,r){if(t){var i={type:e,target:t,mouseX:n,mouseY:r};while(t)t.trigger(i),t=t.parent}},_hitTest:function(e,t,n){var r;for(var i=e.length-1;i>=0;i--){r=e[i];if(r._children.length){r=this._hitTest(r._children,t,n);if(r)return r}else if(this._hitTestMatrix(r,t,n))return r}return null},_hitTestMatrix:function(e,t,n){if(!e.visible||!e.mouseEnabled)return!1;var r=new i,s=[],o,u,a;while(e&&e!==this)s.unshift(e),e=e.parent;r.append(1,0,0,1,-t,-n);for(var f=0,l=s.length;f<l;f++)e=s[f],a=e._matrix2d,o=e._getAnchorX(),u=e._getAnchorY(),o===0&&u===0?r.append(a.a,a.b,a.c,a.d,a.tx,a.ty):(r.append(a.a,a.b,a.c,a.d,a.tx+o,a.ty+u),r.append(1,0,0,1,-o,-u));r.invert();var c=r.tx,h=r.ty,p=e.radius,d=e.width,v=e.height;return p?p*p>=(c-p)*(c-p)+(h-p)*(h-p):d&&v?c>=0&&c<=d&&h>=0&&h<=v:!1}});return s}),define("Graphics2D",["require","exports","module"],function(e,t,n){var r=function(){};return r.get=function(e){return r.shapes[e]},r.commonStyle=function(e,t){t.stroke&&t.lineWidth===undefined&&(t.lineWidth=1),e.style("fill",t.fill),e.style("stroke",t.stroke),e.style("lineWidth",t.lineWidth)},r.commonDraw=function(e,t,n){t&&e.fill(),n&&e.stroke()},r.shapes={rect:{type:"rect",init:function(e){this.style("size",e),r.commonStyle(this,e)},draw:function(e){this.setFill(e)&&e.fillRect(0,0,this.width,this.height),this.setStroke(e)&&e.strokeRect(0,0,this.width,this.height)}},circle:{type:"circle",init:function(e){e.angle===undefined&&(e.angle=360),this.style("radius",e.radius),this.style("angle",e.angle),r.commonStyle(this,e)},draw:function(e){var t=this.radius,n=this.setFill(e),i=this.setStroke(e);e.beginPath(),e.arc(t,t,t,0,this.angle/360*Math.PI*2,0),this.angle<360&&e.lineTo(t,t),e.closePath(),r.commonDraw(e,n,i)}},ellipse:{type:"ellipse",init:function(e){this.style("radiusXY",e),r.commonStyle(this,e)},draw:function(e){var t=.5522848,n=this.radiusX,i=this.radiusY,s=n*t,o=i*t,u=n*2,a=i*2,f=this.setFill(e),l=this.setStroke(e);e.beginPath(),e.moveTo(0,i),e.bezierCurveTo(0,i-o,n-s,0,n,0),e.bezierCurveTo(n+s,0,u,i-o,u,i),e.bezierCurveTo(u,i+o,n+s,a,n,a),e.bezierCurveTo(n-s,a,0,i+o,0,i),e.closePath(),r.commonDraw(e,f,l)}},line:{type:"line",init:function(e){e.lineWidth===undefined&&(e.lineWidth=1),this.path=e.path,this.style("stroke",e.stroke),this.style("lineWidth",e.lineWidth)},draw:function(e){var t=this.path,n,r=this.setStroke(e);if(r&&t.length>1){e.beginPath();for(var i=0,s=t.length;i<s;i++)n=t[i],i===0?e.moveTo(n[0],n[1]):n.length===2?e.lineTo(n[0],n[1]):n.length===4?e.quadraticCurveTo(n[0],n[1],n[2],n[3]):n.length===6&&e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);e.stroke()}}},ploygon:{type:"ploygon",init:function(e){this.path=e.path,r.commonStyle(this,e)},draw:function(e){var t=this.path,n,i=this.setFill(e),s=this.setStroke(e);if(t.length>2){e.beginPath();for(var o=0,u=t.length;o<u;o++)n=t[o],o===0?e.moveTo(n[0],n[1]):n.length===2?e.lineTo(n[0],n[1]):n.length===4?e.quadraticCurveTo(n[0],n[1],n[2],n[3]):n.length===6&&e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);e.closePath(),r.commonDraw(e,i,s)}}},polyStar:{type:"polyStar",init:function(e){this.sides=e.sides,this.cohesion=e.cohesion,this.style("radius",e.radius),r.commonStyle(this,e)},draw:function(e){var t=this.radius,n=this.sides,i=this.cohesion,s,o,u,a=this.setFill(e),f=this.setStroke(e);e.beginPath();for(var l=0;l<n;l++)s=l/n*Math.PI*2,o=(1-Math.sin(s))*t,u=(1-Math.cos(s))*t,l===0?e.moveTo(o,u):e.lineTo(o,u),i&&(s+=Math.PI/n,o=(1-Math.sin(s)*i)*t,u=(1-Math.cos(s)*i)*t,e.lineTo(o,u));e.closePath(),r.commonDraw(e,a,f)}},roundRect:{type:"roundRect",init:function(){},draw:function(){}},lines:{type:"lines",init:function(e){e.lineWidth===undefined&&(e.lineWidth=1),this.paths=e.paths,this.style("stroke",e.stroke),this.style("lineWidth",e.lineWidth)},draw:function(e){var t=this.paths,n,r,i=this.setStroke(e);if(i&&t.length){e.beginPath();for(var s=0,o=t.length;s<o;s++){n=t[s];if(n.length>1)for(var u=0,a=n.length;u<a;u++)r=n[u],u===0?e.moveTo(r[0],r[1]):r.length===2?e.lineTo(r[0],r[1]):r.length===4?e.quadraticCurveTo(r[0],r[1],r[2],r[3]):r.length===6&&e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}e.stroke()}}}},r}),define("Shape",["require","exports","module","DisplayObject","Graphics2D"],function(e,t,n){var r=e("DisplayObject"),i=e("Graphics2D"),s=r.extend({graphics:null,snapToPixel:!0,init:function(e){this._super(e),this._initGraphics(e.graphics)},draw:function(e){this.graphics&&this.graphics.draw.call(this,e)},setFill:function(e){var t=this.fillColor,n=this.fillGradient,r=this.fillImage;if(r)r.complete&&(t=e.createPattern(r,"no-repeat"));else if(n){switch(n[0]){case"top":case"bottom":t=e.createLinearGradient(0,0,0,this.height);break;case"left":case"right":t=e.createLinearGradient(0,0,this.width,0);break;case"left top":t=e.createLinearGradient(0,0,this.width,this.height);break;case"right top":t=e.createLinearGradient(this.width,0,0,this.height);break;case"center":var i=this.width/2,s=this.height/2;t=e.createRadialGradient(i,s,0,i,s,i>s?i:s)}t.addColorStop(0,n[1]),t.addColorStop(1,n[2])}return t?(e.fillStyle=t,!0):!1},setStroke:function(e){var t=this.strokeColor,n=this.lineWidth;if(t&&n){e.strokeStyle=t,e.lineWidth=n,e.lineCap=this.lineCap||"round",e.lineJoin=this.lineJoin||"round";if(this.snapToPixel&&n===1){var r=this._matrix2d;e.translate(r.tx>=0?.5:-0.5,r.ty>=0?.5:-0.5)}return!0}return!1},_initGraphics:function(e){var t=e.type,n=t?i.get(t):e;n&&n.init&&n.draw&&(this.graphics=n,n.init.call(this,e))}});return s}),define("Filter",["require","exports","module"],function(e,t,n){var r=function(){};return r.get=function(e,t,n){var i=r.filters[t];if(i)return i(e,n)},r.filters={grayscale:function(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");r.drawImage(e,0,0);var i=r.getImageData(0,0,n.width,n.height),s=i.data,o;for(var u=0,a=s.length;u<a;u+=4)o=(s[u]+s[u+1]+s[u+2])/3,s[u]=s[u+1]=s[u+2]=o;return r.putImageData(i,0,0),n},brightness:function(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");return r.drawImage(e,0,0),r.globalCompositeOperation="lighter",r.drawImage(e,0,0),n},impression:function(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");r.drawImage(e,0,0);var i=r.getImageData(0,0,n.width,n.height),s=i.data,o=["1","0"],u=[];for(var a=0,f=s.length;a<f;a+=16){if(Math.floor(a/4/n.width)%4)continue;u.push(["rgba("+s[a]+","+s[a+1]+","+s[a+2]+","+s[a+3]+")",o[Math.floor(Math.random()*o.length)],a/4%n.width,Math.floor(a/4/n.width)])}r.clearRect(0,0,n.width,n.height),r.font="40px Microsoft Yahei",r.textBaseline="middle",r.textAlign="center",r.globalAlpha=.25;var l,c;while(u.length)l=Math.floor(Math.random()*u.length),c=u[l],r.fillStyle=c[0],r.fillText(c[1],c[2],c[3]),u.splice(l,1);return n},rilievo:function(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");r.drawImage(e,0,0);var i=r.getImageData(0,0,n.width,n.height),s=i.data,o,u,a,f=function(e){return e<0?e=0:e>255&&(e=255),e};for(var l=0,c=s.length;l<c;l+=4)o=l+4,s[o]===undefined&&(o=l),u=Math.floor(s[o]+s[o+1]+s[o+2]-(s[l]+s[l+1]+s[l+2])),a=f(u+128),s[l]=s[l+1]=s[l+2]=a;return r.putImageData(i,0,0),n}},r}),define("Bitmap",["require","exports","module","DisplayObject","Preload","Filter"],function(e,t,n){var r=e("DisplayObject"),i=e("Preload"),s=e("Filter"),o=!!document.createElement("canvas").getContext,u=document.createElement("div").style,a=u.webkitTransform===""?"webkit":u.WebkitTransform===""?"Webkit":u.msTransform===""?"ms":u.MozTransform===""?"Moz":"ct",f=r.extend({_image:null,_sourceRect:null,_sourceCanvas:null,_scaleToFit:!1,init:function(e){this._super(e),this._initImage(e)},_initImage:function(e){var t=e.image;e.sourceRect?(this._sourceRect=e.sourceRect,this.style("size",{width:this._sourceRect[2],height:this._sourceRect[3]})):e.scaleToFit&&(this._scaleToFit=e.scaleToFit),this.renderMode===0?(this.elemStyle.backgroundImage="url("+t+")",this.elemStyle.backgroundRepeat="no-repeat",this._sourceRect?this.elemStyle.backgroundPosition="-"+this._sourceRect[0]+"px -"+this._sourceRect[1]+"px":this._scaleToFit&&(this.elemStyle.backgroundSize="100% 100%")):this.renderMode===1&&(typeof t=="string"?(this._image=new Image,this._image.src=t):this._image=t)},draw:function(e){if(this._image.complete){var t=this._sourceCanvas||this._image;this._sourceRect?e.drawImage(t,this._sourceRect[0],this._sourceRect[1],this.width,this.height,0,0,this.width,this.height):this._scaleToFit?e.drawImage(t,0,0,t.width,t.height,0,0,this.width,this.height):e.drawImage(t,0,0,this.width,this.height,0,0,this.width,this.height)}},applyFilter:function(e,t){if(this.renderMode===0)this.elemStyle[a+"Filter"]=e?e+"("+t+")":"";else if(this.renderMode===1){var n=this._image;if(n.complete)this._sourceCanvas=e&&o?s.get(n,e,t):null;else{var r=this;n.addEventListener||(n.addEventListener=n.attachEvent),n.addEventListener("load",function(){r.applyFilter(e,t)})}}}});return f}),define("Text",["require","exports","module","DisplayObject"],function(e,t,n){var r=e("DisplayObject"),i=r.extend({text:null,init:function(e){this._super(e),this._setText(e)},draw:function(e){e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.fillStyle=this.fillColor,e.fillText(this.text,0,0)},_setText:function(e){this.text=e.text||"",this.font=e.font||"20px Microsoft Yahei",this.textAlign=e.textAlign||"left",this.textBaseline=e.textBaseline||"top",this.fillColor=e.fill||"black",this.renderMode===0&&(this.elem.innerHTML=this.text,this.elemStyle.color=this.fillColor)}});return i}),define("Timeline",["require","exports","module","Class","Ease"],function(e,t,n){var r=e("Class"),i=e("Ease"),s=r.extend({_paused:!0,_loop:!1,_targets:null,_currentTarget:null,_deltaTime:-1,_duration:-1,init:function(e){this._paused=!1,this._loop=e?!!e.loop:!1,this._targets=[],this._deltaTime=0,this._duration=0},play:function(e){typeof e=="number"?this.gotoAndPlay(e):this._paused=!1},stop:function(){this._paused=!0},gotoAndPlay:function(e){this._paused=!1,this._deltaTime=e},has:function(e){var t=this._targets;for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1},get:function(e){return this.has(e)||(this.removeKeyframes(e),e.data("tl_queue",[]),e.data("tl_start",{}),this._targets.push(e)),this._currentTarget=e,this},getTime:function(){return this._deltaTime},addKeyframe:function(e,t,n,r){var i=this._currentTarget,s=i.data("tl_queue"),o=i.data("tl_start");for(var u in e)o[u]=this._clone(i.style(u));s.push([e,t,n||"linear",r]),s.sort(function(e,t){return e[1]-t[1]});var a=[],f,l=0;for(var u=0,c=s.length;u<c;u++)f=s[u],a.push({from:l,to:f[1],start:o,end:f[0],easing:f[2],callback:f[3]}),l=f[1],o=this._merge(o,f[0]);return this._duration<l&&(this._duration=l),i.data("tl_steps",a),this},removeKeyframes:function(e){e.data("tl_queue",null),e.data("tl_start",null),e.data("tl_steps",null),e.data("tl_cur_step",null)},update:function(e){if(this._paused)return;var t=this._targets,n,r,i=this._deltaTime,s=this._duration;for(var o=0,u=t.length;o<u;o++)n=t[o],r=this._getStep(n,i),r&&(this._updateStep(n,r,i),i===s&&r.to===s&&r.callback&&r.callback(i));if(i===s)this._loop?this._deltaTime=0:this.stop();else{var a=i+e;this._deltaTime=a>s?s:a}},_getStep:function(e,t){var n=e.data("tl_cur_step");if(n){if(t>=n.from&&t<=n.to)return n;t>n.to&&n.callback&&n.callback(t),e.data("tl_cur_step",null)}var r=e.data("tl_steps"),i=r[r.length-1].to,s;if(t<=i)for(var o=0,u=r.length;o<u;o++){s=r[o];if(t>=s.from&&t<=s.to)return e.style(s.start),e.data("tl_cur_step",s),s}return null},_updateStep:function(e,t,n){if(t.to===t.from){e.style(t.end);return}var r=t.to-t.from,s=i.get(t.easing),o=(n-t.from)/r,u=s(o,o,0,1,1),a=t.start,f=t.end;for(var l in f)e._stepStyle(l,{pos:u,start:a[l],end:f[l]})},_clone:function(e){var t;if(typeof e=="object"){t={};for(var n in e)t[n]=this._clone(e[n])}else t=e;return t},_merge:function(e,t){var n=this._clone(e);if(typeof t=="object")for(var r in t)if(typeof n[r]=="object"&&typeof t[r]=="object")for(var i in t[r])n[r][i]=t[r][i];else n[r]=t[r];else n=t;return n}});return s}),define("Sprite",["require","exports","module","DisplayObject"],function(e,t,n){var r=e("DisplayObject"),i=r.extend({_paused:!0,_images:null,_imageIndex:-1,_frames:null,_frameIndex:-1,_currentFrame:null,_animations:null,_currentAnimation:null,_deltaTime:-1,init:function(e){this._super(e),this._initSpriteSheet(e.spriteSheet)},play:function(e){typeof e=="string"?this.playAnimation(e):typeof e=="number"?this.gotoAndPlay(e):this._paused=!1},stop:function(){this._paused=!0},gotoAndPlay:function(e){this._paused=!1,this._currentAnimation=null,this._frameIndex=e},gotoAndStop:function(e){this._paused=!0,this._currentAnimation=null,this._frameIndex=e},playAnimation:function(e){this._paused=!1;var t=this._animations[e];t&&(this._currentAnimation=t,this._frameIndex=t.start,this._deltaTime=0)},update:function(e){if(this._paused)return;this._updateFrame();var t,n,r,i,s,o=this._currentAnimation;o?(t=o.name,n=o.start,r=o.end,i=o.next,s=o.duration):(t=null,n=0,r=this._frames.length-1,i=!0,s=0);var u;s>0?(this._deltaTime+=e,u=Math.floor((r-n+1)*(this._deltaTime/s)+n)):u=this._frameIndex+1,u>r?(typeof i=="string"?this.playAnimation(i):i===!0?this._frameIndex=n:this.stop(),this.trigger({type:"animationEnd",name:t})):this._frameIndex=u},draw:function(e){var t=this._currentFrame;if(t){var n=this._images[t[4]];n&&n.complete&&e.drawImage(n,t[0],t[1],t[2],t[3],t[5],t[6],t[2],t[3])}},_initSpriteSheet:function(e){this._initImages(e.images),this._initFrames(e.frames),this._initAnimations(e.animations)},_initImages:function(e){this._images=[];var t;for(var n=0,r=e.length;n<r;n++)this.renderMode===0?t=e[n]:(t=new Image,t.src=e[n]),this._images.push(t)},_initFrames:function(e,t){t||(this._frames=[]);if(e instanceof Array)for(var n=0,r=e.length;n<r;n++)e[n]instanceof Array?this._frames.push(e[n]):this._initFrames(e[n],!0);else for(var i=0,s=e.rows;i<s;i++)for(var n=0,r=e.cols;n<r;n++){if(i*e.cols+n===e.num)break;this._frames.push([n*e.width,i*e.height,e.width,e.height,e.image||0,0,0])}},_initAnimations:function(e){this._animations={};var t;for(var n in e)t=e[n],this._animations[n]={name:n,start:t[0],end:t[1],next:t[2],duration:t[3]}},_updateFrame:function(){var e=this._currentFrame=this._frames[this._frameIndex];if(e){(this.width!==e[2]||this.height!==e[3])&&this.style("size",{width:e[2],height:e[3]});if(this.renderMode===0){var t=this.elemStyle;this._imageIndex!==e[4]&&(this._imageIndex=e[4],t.backgroundImage="url("+this._images[e[4]]+")",t.backgroundRepeat="no-repeat"),t.backgroundPosition="-"+e[0]+"px -"+e[1]+"px"}}}});return i}),define("ParticleEmitter",["require","exports","module","Shape","Bitmap"],function(e,t,n){var r=e("Shape"),i=e("Bitmap"),s=function(){};return s.get=function(e){return s.particles[e]},s.particles={rain:{type:"rain",init:function(e){var t=e.width,n=e.height,i;this.particles=[],this.data("fall_width",t),this.data("fall_height",n);for(var s=0,o=e.num||60;s<o;s++)i=new r({renderMode:this.renderMode,pos:{x:Math.floor(Math.random()*t),y:-Math.floor(Math.random()*n)},graphics:{type:"rect",width:s%6===0?3:2,height:s%3===0?28:20,fill:"#FFF"},alpha:Math.floor(Math.random()*3)/10+.2}),i.data("fall_speed",Math.floor(Math.random()*25)/100+.25),this.particles.push(i),this.addChild(i)},update:function(e){var t=this.particles,n=this.data("fall_width"),r=this.data("fall_height"),i,s,o;for(var u=0,a=t.length;u<a;u++)i=t[u],s=i.data("fall_speed")*e,o=i.y,o>r&&(o=-Math.floor(Math.random()*r)),i.style("y",o+s)}},snow:{type:"snow",init:function(e){var t=e.width,n=e.height,s,o,u,a,f;e.image&&(o=new Image,o.src=e.image),this.particles=[],this.data("fall_width",t),this.data("fall_height",n);for(var l=0,c=e.num||60;l<c;l++)a={x:Math.floor(Math.random()*t),y:-Math.floor(Math.random()*n)},u=Math.floor(Math.random()*8)+12,f=Math.floor(Math.random()*4)/10+.6,s=o?new i({renderMode:this.renderMode,pos:a,width:u,height:u,scaleToFit:!0,image:o,alpha:f}):new r({renderMode:this.renderMode,pos:a,alpha:Math.floor(Math.random()*5)/10+.3,graphics:{type:"circle",radius:Math.floor(Math.random()*3)+4,fill:"#FFF",angle:360}}),s.data("fall_x",s.x),s.data("fall_width",Math.floor(Math.random()*10+10)),s.data("fall_speed",Math.floor(Math.random()*15+15)/1e3),this.particles.push(s),this.addChild(s)},update:function(e){var t=this.particles,n=this.data("fall_width"),r=this.data("fall_height"),i,s,o,u,a;for(var f=0,l=t.length;f<l;f++)i=t[f],s=i.data("fall_speed"),o=s*e,u=i.data("fall_x"),a=i.y,a>r&&(i.fallTime=0,a=-Math.floor(Math.random()*r)),i.style("pos",{x:u+Math.sin(a/(s*2e3))*i.data("fall_width"),y:a+o})}}},s}),define("ParticleSystem",["require","exports","module","DisplayObject","ParticleEmitter"],function(e,t,n){var r=e("DisplayObject"),i=e("ParticleEmitter"),s=r.extend({emitter:null,particles:null,init:function(e){this._super(e),this._initParticle(e.particle)},update:function(e){this.emitter&&this.emitter.update.call(this,e)},_initParticle:function(e){var t=e.type,n=t?i.get(t):e;n&&n.init&&n.update&&(this.emitter=n,n.init.call(this,e))}});return s}),define("BoneAnimation",["require","exports","module","DisplayObject","Timeline","Bitmap"],function(e,t,n){var r=e("DisplayObject"),i=e("Timeline"),s=e("Bitmap"),o=r.extend({_paused:!0,_bones:null,_animations:null,_currentAnimation:null,_timeline:null,init:function(e){this._super(e),this._initBones(e)},play:function(e){typeof e=="string"?this.playAnimation(e):this._paused=!1},stop:function(){this._paused=!0},playAnimation:function(e){this._paused=!1;var t=this._animations[e];t&&(this._currentAnimation=t,this._timeline=this._initTimeline(t))},update:function(e){if(this._paused)return;this._timeline&&this._timeline.update(e)},_initBones:function(e){this._bones={},this._animations={};var t=e.bones,n=e.animations,i,o;for(var u=0,a=t.length;u<a;u++)i=t[u],i.image?o=new s({renderMode:this.renderMode,x:0,y:0,width:i.width,height:i.height,image:i.image}):o=new r({renderMode:this.renderMode,x:0,y:0,width:i.width,height:i.height}),i.parent||this.addChild(o),this._bones[i.tag]=o;for(var u=0,a=t.length;u<a;u++)i=t[u],i.parent&&this._bones[i.parent].addChild(this._bones[i.tag]);for(var u in n)this._animations[u]=n[u]},_initTimeline:function(e){var t=new i({loop:!0}),n,r,s,o;for(var u=0,a=e.length;u<a;u++){n=e[u],r=this._bones[n.tag],s=n.frames,t.get(r);for(var f=0,l=s.length;f<l;f++)o=s[f],t.addKeyframe(o,o.time)}return t}});return o}),define("cartoon",["require","exports","module","Class","Ticker","Loader","Preload","StyleSheet","DisplayObject","Container","Canvas","Graphics2D","Shape","Filter","Bitmap","Text","Tween","Timeline","Sprite","ParticleEmitter","ParticleSystem","BoneAnimation"],function(e,t,n){var r={Class:e("Class"),Ticker:e("Ticker"),Loader:e("Loader"),Preload:e("Preload"),StyleSheet:e("StyleSheet"),DisplayObject:e("DisplayObject"),Container:e("Container"),Canvas:e("Canvas"),Graphics2D:e("Graphics2D"),Shape:e("Shape"),Filter:e("Filter"),Bitmap:e("Bitmap"),Text:e("Text"),Tween:e("Tween"),Timeline:e("Timeline"),Sprite:e("Sprite"),ParticleEmitter:e("ParticleEmitter"),ParticleSystem:e("ParticleSystem"),BoneAnimation:e("BoneAnimation")};return r});