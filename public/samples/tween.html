<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<script src="../jquery/jquery-1.11.1.min.js"></script>
	<script src="../jquery/require.min.js"></script>
	<script src="../cartoon/excanvas.js"></script>
	<link rel="stylesheet" href="../jquery/bootstrap.min.css">
	<style>
	
		html {height:100%;}
		body {height:100%;background:#fff;color:#000;}
		#fps {position:absolute;z-index:200;left:0;top:0;color:#FF0;}
		.display { overflow: hidden; width: 100%; }
		.div-container, .cvs-container { float: left; border:#0E97E6 solid 1px; margin: 5px; position:relative; }
		.control {clear: both;}
		.control label { margin:5px 5px 0 8px; }
	</style>
</head>
<body>
	<div class="display">
		<div class="div-container"></div>
		<canvas class="cvs-container"></canvas>
	</div>
	
	<div class="control">
		<input type="button" value="linear" id="linear">
		<input type="button" value="ease-in" id="easeIn">
		<input type="button" value="ease-out" id="easeOut">
		<input type="button" value="ease-in-out" id="easeInOut">
		<input type="button" value="expo-in" id="expoIn">
		<input type="button" value="expo-out" id="expoOut">
		<input type="button" value="expo-in-out" id="expoInOut">
		<input type="button" value="bounce-in" id="bounceIn">
		<input type="button" value="bounce-out" id="bounceOut">
		<input type="button" value="bounce-in-out" id="bounceInOut">
		<input type="button" value="elas-in" id="elasIn">
		<input type="button" value="elas-out" id="elasOut">
		<input type="button" value="elas-in-out" id="elasInOut">
		<input type="button" value="back-in" id="backIn">
		<input type="button" value="back-out" id="backOut">
		<input type="button" value="back-in-out" id="backInOut">
	</div>
<script>

	require.config({
		baseUrl: '../cartoon/',
		paths: {
			cartoon: 'cartoon'
		}
	});
	require(['cartoon'], function(ct){
		
		var divContainer = $('.div-container').cartoon({
			size: { width: 1300, height: 300 }
		});
		
		divContainer.$.css('overflow', 'hidden');
		
		var cvsContainer = $('.cvs-container').cartoon({
			type: 'Canvas',
			size: { width: 1300, height: 150 }
		});
		
		var divRect = $.cartoon({
			type: 'Bitmap',
			pos: { x: 0, y: 150 },
			imageUrl: 'images/oneDot.png',
			sourceRect: [0, 0, 64, 64]
		});
		
		var divRect2 = $.cartoon({
			type: 'Bitmap',
			pos: { x: 0, y: 0 },
			imageUrl: 'images/oneDot.png',
			sourceRect: [0, 0, 64, 64]
		});
		
		var cvsRect = $.cartoon({
			type: 'Bitmap', 
			renderInCanvas: true,
			pos: { x: 0, y: 0 },
			imageUrl: 'images/oneDot.png',
			sourceRect: [0, 0, 64, 64]
		});
		
		var cvsLine = $.cartoon({
			type: 'Shape', 
			renderInCanvas: true,
			pos: { x: 0, y: 20 },
			graphics: {
				type: 'Lines', color: 'red', 
				paths: []
			}
		});
		var cvsLine2 = $.cartoon({
			type: 'Shape', 
			renderInCanvas: true,
			pos: { x: 0, y: 20 },
			graphics: {
				type: 'Lines', color: 'blue', 
				paths: []
			}
		});
		
		divContainer.addChild(divRect);
		divContainer.addChild(divRect2);
		
		cvsContainer.addChild(cvsRect);
		cvsContainer.addChild(cvsLine);
		cvsContainer.addChild(cvsLine2);
		
		var ticker = new ct.Ticker(60, 'auto', true);
		ticker.add(cvsContainer);
		ticker.start();
		
		var time = time1 = 0;
		$('.control').bind('click', function(e) {
			var id = e.target.id;
			divRect.posX(0);
			divRect.transform({ rotate: 0 });
			cvsRect.posX(0);
			cvsRect.transform({ rotate: 0 });
			divRect2.posX(0);
			divRect2.transform({ rotate: 0 });
			cvsLine.paths[0] = [];
			cvsLine2.paths[0] = [];
			time = 0;
			divRect.to({ pos: { x: 1100 }, transform: { rotate: 720 } }, 2000, id);
			cvsRect.to({ pos: { x: 1100 }, transform: { rotate: 720 } }, {
				duration : 2000,
				easing : id,
				step: function(fx){
					time+=3;
					cvsLine.paths[0].push([ time,  cvsRect.x/10 ]);
				}
			});
			time1 = 0;
			divRect2.to({ pos: { x: 1100 }, transform: { rotate: 720 } }, {
				duration : 2000,
				easing : 'linear',
				step: function(fx){
					time1+=3;
					cvsLine2.paths[0].push([ time1,  divRect2.x/10 ]);
				}
			});
		});
	});
</script>
</body>
</html>