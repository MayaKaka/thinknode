<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<script src="../jquery/jquery-1.11.1.min.js"></script>
	<script src="../jquery/require.min.js"></script>
	<link rel="stylesheet" href="../jquery/bootstrap.min.css">
	<style>
	
		html {height:100%;}
		body {height:100%;background:#fff;color:#000;}
		#fps {position:absolute;z-index:200;left:0;top:0;color:#FF0;}
		.display { overflow: hidden; width: 100%; }
		.div-container, .cvs-container { float: left; border:#0E97E6 solid 1px; margin: 5px; position:relative; }
		.control {clear: both;}
		.control label { margin:5px 5px 0 8px; }
	</style>
</head>
<body>
	<div class="display">
		<div class="div-container"></div>
		<canvas class="cvs-container"></canvas>
	</div>
	
	<div class="control">
		<label>x</label><input type="number" value="0" id="x">
		<label>y</label><input type="number" value="0" id="y">
		<br>
		<label>translateX</label><input type="number" value="0" id="translateX">
		<label>translateY</label><input type="number" value="0" id="translateY">
		<label>rotate</label><input type="number" value="0" id="rotate">
		<br>
		<label>scaleX</label><input type="number" value="1" id="scaleX">
		<label>scaleY</label><input type="number" value="1" id="scaleY">
		<br>
		<label>originX</label><input type="number" value="0.5" id="originX">
		<label>originY</label><input type="number" value="0.5" id="originY">
		<label>alpha</label><input type="number" value="1" id="alpha">
		<label>visible</label><input type="checkbox" checked="1" id="visible">
	</div>
<script>

	require.config({
		baseUrl: '../cartoon/',
		paths: {
			cartoon: 'cartoon'
		}
	});
	var resource = ['cartoon'];
	if (!document.createElement('canvas').getContext) {
		resource.push('excanvas');
	}
	require(resource, function(ct){
		
		var divContainer = $('.div-container').cartoon({
			width: 600, height: 300
		});
		
		divContainer.$.css('overflow', 'hidden');
		
		var cvsContainer = $('.cvs-container').cartoon({
			type: 'Canvas',
			width: 600, height: 300
		});
		
		var divRect = $.cartoon({
			type: 'Shape',
			graphics: {
				type: 'rect', fill: 'top,#FF0000,#FFFF00', width: 100, height: 100, stroke: '#000'
			}
		});
		
		var cvsRect = $.cartoon({
			type: 'Shape', 
			renderInCanvas: true,
			graphics: {
				type: 'rect', fill: 'top,#FF0000,#FFFF00', width: 100, height: 100, stroke: '#000'
			}
		});
		
		divContainer.addChild(divRect);
		cvsContainer.addChild(cvsRect);

		var ticker = new ct.Ticker(30);
		ticker.add(cvsContainer);
		ticker.start();
		
		$('.control').bind('change', function(e) {
			var id = e.target.id,
				val = parseFloat(e.target.value);
			
			switch(id) {
				case 'x':
					divRect.style('x', val);
					cvsRect.style('x', val);
					break;
				case 'y':
					divRect.style('y', val);
					cvsRect.style('y', val);
					break;
				case 'translateX':
					divRect.style('transform', { translateX: val });
					cvsRect.style('transform', { translateX: val });
					break;
				case 'translateY':
					divRect.style('transform', { translateY: val });
					cvsRect.style('transform', { translateY: val });
					break;
				case 'rotate':
					divRect.style('transform', { rotate: val });
					cvsRect.style('transform', { rotate: val });
					break;
				case 'scaleX':
					divRect.style('transform', { scaleX: val });
					cvsRect.style('transform', { scaleX: val });
					break;
				case 'scaleY':
					divRect.style('transform', { scaleY: val });
					cvsRect.style('transform', { scaleY: val });
					break;
				case 'originX':
					divRect.style('transform', { originX: val });
					cvsRect.style('transform', { originX: val });
					break;
				case 'originY':
					divRect.style('transform', { originY: val });
					cvsRect.style('transform', { originY: val });
					break;
				case 'alpha':
					divRect.style('alpha', val);
					cvsRect.style('alpha', val);
					break;
				case 'visible':
					val = e.target.checked;
					divRect.style('visible', val);
					cvsRect.style('visible', val);
					break;
				
			}
		});
	});
</script>
</body>
</html>